<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Pascal’s Triangle &mdash; Pascal&#39;s Triangle 0.0.1 documentation</title>
    
      <style>

/*
 * basic.css
 * ~~~~~~~~~
 *
 * Sphinx stylesheet -- basic theme.
 *
 * :copyright: Copyright 2007-2016 by the Sphinx team, see AUTHORS.
 * :license: BSD, see LICENSE for details.
 *
 */

/* -- main layout ----------------------------------------------------------- */

div.clearer {
    clear: both;
}

/* -- relbar ---------------------------------------------------------------- */

div.related {
    width: 100%;
    font-size: 90%;
}

div.related h3 {
    display: none;
}

div.related ul {
    margin: 0;
    padding: 0 0 0 10px;
    list-style: none;
}

div.related li {
    display: inline;
}

div.related li.right {
    float: right;
    margin-right: 5px;
}

/* -- sidebar --------------------------------------------------------------- */

div.sphinxsidebarwrapper {
    padding: 10px 5px 0 10px;
}

div.sphinxsidebar {
    float: left;
    width: 230px;
    margin-left: -100%;
    font-size: 90%;
}

div.sphinxsidebar ul {
    list-style: none;
}

div.sphinxsidebar ul ul,
div.sphinxsidebar ul.want-points {
    margin-left: 20px;
    list-style: square;
}

div.sphinxsidebar ul ul {
    margin-top: 0;
    margin-bottom: 0;
}

div.sphinxsidebar form {
    margin-top: 10px;
}

div.sphinxsidebar input {
    border: 1px solid #98dbcc;
    font-family: sans-serif;
    font-size: 1em;
}

div.sphinxsidebar #searchbox input[type="text"] {
    width: 170px;
}

div.sphinxsidebar #searchbox input[type="submit"] {
    width: 30px;
}

img {
    border: 0;
    max-width: 100%;
}

/* -- search page ----------------------------------------------------------- */

ul.search {
    margin: 10px 0 0 20px;
    padding: 0;
}

ul.search li {
    padding: 5px 0 5px 20px;
    background-image: url(file.png);
    background-repeat: no-repeat;
    background-position: 0 7px;
}

ul.search li a {
    font-weight: bold;
}

ul.search li div.context {
    color: #888;
    margin: 2px 0 0 30px;
    text-align: left;
}

ul.keywordmatches li.goodmatch a {
    font-weight: bold;
}

/* -- index page ------------------------------------------------------------ */

table.contentstable {
    width: 90%;
}

table.contentstable p.biglink {
    line-height: 150%;
}

a.biglink {
    font-size: 1.3em;
}

span.linkdescr {
    font-style: italic;
    padding-top: 5px;
    font-size: 90%;
}

/* -- general index --------------------------------------------------------- */

table.indextable {
    width: 100%;
}

table.indextable td {
    text-align: left;
    vertical-align: top;
}

table.indextable dl, table.indextable dd {
    margin-top: 0;
    margin-bottom: 0;
}

table.indextable tr.pcap {
    height: 10px;
}

table.indextable tr.cap {
    margin-top: 10px;
    background-color: #f2f2f2;
}

img.toggler {
    margin-right: 3px;
    margin-top: 3px;
    cursor: pointer;
}

div.modindex-jumpbox {
    border-top: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    margin: 1em 0 1em 0;
    padding: 0.4em;
}

div.genindex-jumpbox {
    border-top: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    margin: 1em 0 1em 0;
    padding: 0.4em;
}

/* -- general body styles --------------------------------------------------- */

a.headerlink {
    visibility: hidden;
}

h1:hover > a.headerlink,
h2:hover > a.headerlink,
h3:hover > a.headerlink,
h4:hover > a.headerlink,
h5:hover > a.headerlink,
h6:hover > a.headerlink,
dt:hover > a.headerlink,
caption:hover > a.headerlink,
p.caption:hover > a.headerlink,
div.code-block-caption:hover > a.headerlink {
    visibility: visible;
}

div.body p.caption {
    text-align: inherit;
}

div.body td {
    text-align: left;
}

.field-list ul {
    padding-left: 1em;
}

.first {
    margin-top: 0 !important;
}

p.rubric {
    margin-top: 30px;
    font-weight: bold;
}

img.align-left, .figure.align-left, object.align-left {
    clear: left;
    float: left;
    margin-right: 1em;
}

img.align-right, .figure.align-right, object.align-right {
    clear: right;
    float: right;
    margin-left: 1em;
}

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
    text-align: left;
}

.align-center {
    text-align: center;
}

.align-right {
    text-align: right;
}

/* -- sidebars -------------------------------------------------------------- */

div.sidebar {
    margin: 0 0 0.5em 1em;
    border: 1px solid #ddb;
    padding: 7px 7px 0 7px;
    background-color: #ffe;
    width: 40%;
    float: right;
}

p.sidebar-title {
    font-weight: bold;
}

/* -- topics ---------------------------------------------------------------- */

div.topic {
    border: 1px solid #ccc;
    padding: 7px 7px 0 7px;
    margin: 10px 0 10px 0;
}

p.topic-title {
    font-size: 1.1em;
    font-weight: bold;
    margin-top: 10px;
}

/* -- admonitions ----------------------------------------------------------- */

div.admonition {
    margin-top: 10px;
    margin-bottom: 10px;
    padding: 7px;
}

div.admonition dt {
    font-weight: bold;
}

div.admonition dl {
    margin-bottom: 0;
}

p.admonition-title {
    margin: 0px 10px 5px 0px;
    font-weight: bold;
}

div.body p.centered {
    text-align: center;
    margin-top: 25px;
}

/* -- tables ---------------------------------------------------------------- */

table.docutils {
    border: 0;
    border-collapse: collapse;
}

table caption span.caption-number {
    font-style: italic;
}

table caption span.caption-text {
}

table.docutils td, table.docutils th {
    padding: 1px 8px 1px 5px;
    border-top: 0;
    border-left: 0;
    border-right: 0;
    border-bottom: 1px solid #aaa;
}

table.field-list td, table.field-list th {
    border: 0 !important;
}

table.footnote td, table.footnote th {
    border: 0 !important;
}

th {
    text-align: left;
    padding-right: 5px;
}

table.citation {
    border-left: solid 1px gray;
    margin-left: 1px;
}

table.citation td {
    border-bottom: none;
}

/* -- figures --------------------------------------------------------------- */

div.figure {
    margin: 0.5em;
    padding: 0.5em;
}

div.figure p.caption {
    padding: 0.3em;
}

div.figure p.caption span.caption-number {
    font-style: italic;
}

div.figure p.caption span.caption-text {
}


/* -- other body styles ----------------------------------------------------- */

ol.arabic {
    list-style: decimal;
}

ol.loweralpha {
    list-style: lower-alpha;
}

ol.upperalpha {
    list-style: upper-alpha;
}

ol.lowerroman {
    list-style: lower-roman;
}

ol.upperroman {
    list-style: upper-roman;
}

dl {
    margin-bottom: 15px;
}

dd p {
    margin-top: 0px;
}

dd ul, dd table {
    margin-bottom: 10px;
}

dd {
    margin-top: 3px;
    margin-bottom: 10px;
    margin-left: 30px;
}

dt:target, .highlighted {
    background-color: #fbe54e;
}

dl.glossary dt {
    font-weight: bold;
    font-size: 1.1em;
}

.field-list ul {
    margin: 0;
    padding-left: 1em;
}

.field-list p {
    margin: 0;
}

.optional {
    font-size: 1.3em;
}

.sig-paren {
    font-size: larger;
}

.versionmodified {
    font-style: italic;
}

.system-message {
    background-color: #fda;
    padding: 5px;
    border: 3px solid red;
}

.footnote:target  {
    background-color: #ffa;
}

.line-block {
    display: block;
    margin-top: 1em;
    margin-bottom: 1em;
}

.line-block .line-block {
    margin-top: 0;
    margin-bottom: 0;
    margin-left: 1.5em;
}

.guilabel, .menuselection {
    font-family: sans-serif;
}

.accelerator {
    text-decoration: underline;
}

.classifier {
    font-style: oblique;
}

abbr, acronym {
    border-bottom: dotted 1px;
    cursor: help;
}

/* -- code displays --------------------------------------------------------- */

pre {
    overflow: auto;
    overflow-y: hidden;  /* fixes display issues on Chrome browsers */
}

td.linenos pre {
    padding: 5px 0px;
    border: 0;
    background-color: transparent;
    color: #aaa;
}

table.highlighttable {
    margin-left: 0.5em;
}

table.highlighttable td {
    padding: 0 0.5em 0 0.5em;
}

div.code-block-caption {
    padding: 2px 5px;
    font-size: small;
}

div.code-block-caption code {
    background-color: transparent;
}

div.code-block-caption + div > div.highlight > pre {
    margin-top: 0;
}

div.code-block-caption span.caption-number {
    padding: 0.1em 0.3em;
    font-style: italic;
}

div.code-block-caption span.caption-text {
}

div.literal-block-wrapper {
    padding: 1em 1em 0;
}

div.literal-block-wrapper div.highlight {
    margin: 0;
}

code.descname {
    background-color: transparent;
    font-weight: bold;
    font-size: 1.2em;
}

code.descclassname {
    background-color: transparent;
}

code.xref, a code {
    background-color: transparent;
    font-weight: bold;
}

h1 code, h2 code, h3 code, h4 code, h5 code, h6 code {
    background-color: transparent;
}

.viewcode-link {
    float: right;
}

.viewcode-back {
    float: right;
    font-family: sans-serif;
}

div.viewcode-block:target {
    margin: -1px -10px;
    padding: 0 10px;
}

/* -- math display ---------------------------------------------------------- */

img.math {
    vertical-align: middle;
}

div.body div.math p {
    text-align: center;
}

span.eqno {
    float: right;
}

/* -- printout stylesheet --------------------------------------------------- */

@media print {
    div.document,
    div.documentwrapper,
    div.bodywrapper {
        margin: 0 !important;
        width: 100%;
    }

    div.sphinxsidebar,
    div.related,
    div.footer,
    #top-link {
        display: none;
    }
}

/* -- page layout ----------------------------------------------------------- */

body {
    font-family: 'goudy old style', 'minion pro', 'bell mt', Georgia, 'Hiragino Mincho Pro', serif;
    font-size: 17px;
    background-color: white;
    color: #000;
    margin: 0;
    padding: 0;
}

div.document {
    width: 940px;
    margin: 30px auto 0 auto;
}

div.documentwrapper {
    float: left;
    width: 100%;
}

div.bodywrapper {
    margin: 0 0 0 220px;
}

div.sphinxsidebar {
    width: 220px;
}

hr {
    border: 1px solid #B1B4B6;
}

div.body {
    background-color: #ffffff;
    color: #3E4349;
    padding: 0 30px 0 30px;
}

div.body > .section {
    text-align: left;
}

div.footer {
    width: 940px;
    margin: 20px auto 30px auto;
    font-size: 14px;
    color: #888;
    text-align: right;
}

div.footer a {
    color: #888;
}


div.relations {
    display: none;
}


div.sphinxsidebar a {
    color: #444;
    text-decoration: none;
    border-bottom: 1px dotted #999;
}

div.sphinxsidebar a:hover {
    border-bottom: 1px solid #999;
}

div.sphinxsidebar {
    font-size: 14px;
    line-height: 1.5;
}

div.sphinxsidebarwrapper {
    padding: 18px 10px;
}

div.sphinxsidebarwrapper p.logo {
    padding: 0;
    margin: -10px 0 0 0px;
    text-align: center;
}

div.sphinxsidebarwrapper h1.logo {
    margin-top: -10px;
    text-align: center;
    margin-bottom: 5px;
    text-align: left;
}

div.sphinxsidebarwrapper h1.logo-name {
    margin-top: 0px;
}

div.sphinxsidebarwrapper p.blurb {
    margin-top: 0;
    font-style: normal;
}

div.sphinxsidebar h3,
div.sphinxsidebar h4 {
    font-family: 'Garamond', 'Georgia', serif;
    color: #444;
    font-size: 24px;
    font-weight: normal;
    margin: 0 0 5px 0;
    padding: 0;
}

div.sphinxsidebar h4 {
    font-size: 20px;
}

div.sphinxsidebar h3 a {
    color: #444;
}

div.sphinxsidebar p.logo a,
div.sphinxsidebar h3 a,
div.sphinxsidebar p.logo a:hover,
div.sphinxsidebar h3 a:hover {
    border: none;
}

div.sphinxsidebar p {
    color: #555;
    margin: 10px 0;
}

div.sphinxsidebar ul {
    margin: 10px 0;
    padding: 0;
    color: #000;
}

div.sphinxsidebar ul li.toctree-l1 > a {
    font-size: 120%;
}

div.sphinxsidebar ul li.toctree-l2 > a {
    font-size: 110%;
}

div.sphinxsidebar input {
    border: 1px solid #CCC;
    font-family: 'goudy old style', 'minion pro', 'bell mt', Georgia, 'Hiragino Mincho Pro', serif;
    font-size: 1em;
}

div.sphinxsidebar hr {
    border: none;
    height: 1px;
    color: #AAA;
    background: #AAA;

    text-align: left;
    margin-left: 0;
    width: 50%;
}

/* -- body styles ----------------------------------------------------------- */

a {
    color: #004B6B;
    text-decoration: underline;
}

a:hover {
    color: #6D4100;
    text-decoration: underline;
}

div.body h1,
div.body h2,
div.body h3,
div.body h4,
div.body h5,
div.body h6 {
    font-family: 'Garamond', 'Georgia', serif;
    font-weight: normal;
    margin: 30px 0px 10px 0px;
    padding: 0;
}

div.body h1 { margin-top: 0; padding-top: 0; font-size: 240%; }
div.body h2 { font-size: 180%; }
div.body h3 { font-size: 150%; }
div.body h4 { font-size: 130%; }
div.body h5 { font-size: 100%; }
div.body h6 { font-size: 100%; }

a.headerlink {
    color: #DDD;
    padding: 0 4px;
    text-decoration: none;
}

a.headerlink:hover {
    color: #444;
    background: #EAEAEA;
}

div.body p, div.body dd, div.body li {
    line-height: 1.4em;
}

div.admonition {
    margin: 20px 0px;
    padding: 10px 30px;
    background-color: #FCC;
    border: 1px solid #FAA;
}

div.admonition tt.xref, div.admonition a tt {
    border-bottom: 1px solid #fafafa;
}

dd div.admonition {
    margin-left: -60px;
    padding-left: 60px;
}

div.admonition p.admonition-title {
    font-family: 'Garamond', 'Georgia', serif;
    font-weight: normal;
    font-size: 24px;
    margin: 0 0 10px 0;
    padding: 0;
    line-height: 1;
}

div.admonition p.last {
    margin-bottom: 0;
}

div.highlight {
    background-color: white;
}

dt:target, .highlight {
    background: #FAF3E8;
}

div.note {
    background-color: #EEE;
    border: 1px solid #CCC;
}

div.seealso {
    background-color: #EEE;
    border: 1px solid #CCC;
}

div.topic {
    background-color: #eee;
}

p.admonition-title {
    display: inline;
}

p.admonition-title:after {
    content: ":";
}

pre, tt, code {
    font-family: 'Consolas', 'Menlo', 'Deja Vu Sans Mono', 'Bitstream Vera Sans Mono', monospace;
    font-size: 0.9em;
}

.hll {
    background-color: #FFC;
    margin: 0 -12px;
    padding: 0 12px;
    display: block;
}

img.screenshot {
}

tt.descname, tt.descclassname, code.descname, code.descclassname {
    font-size: 0.95em;
}

tt.descname, code.descname {
    padding-right: 0.08em;
}

img.screenshot {
    -moz-box-shadow: 2px 2px 4px #eee;
    -webkit-box-shadow: 2px 2px 4px #eee;
    box-shadow: 2px 2px 4px #eee;
}

table.docutils {
    border: 1px solid #888;
    -moz-box-shadow: 2px 2px 4px #eee;
    -webkit-box-shadow: 2px 2px 4px #eee;
    box-shadow: 2px 2px 4px #eee;
}

table.docutils td, table.docutils th {
    border: 1px solid #888;
    padding: 0.25em 0.7em;
}

table.field-list, table.footnote {
    border: none;
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
}

table.footnote {
    margin: 15px 0;
    width: 100%;
    border: 1px solid #EEE;
    background: #FDFDFD;
    font-size: 0.9em;
}

table.footnote + table.footnote {
    margin-top: -15px;
    border-top: none;
}

table.field-list th {
    padding: 0 0.8em 0 0;
}

table.field-list td {
    padding: 0;
}

table.field-list p {
    margin-bottom: 0.8em;
}

table.footnote td.label {
    width: 0px;
    padding: 0.3em 0 0.3em 0.5em;
}

table.footnote td {
    padding: 0.3em 0.5em;
}

dl {
    margin: 0;
    padding: 0;
}

dl dd {
    margin-left: 30px;
}

blockquote {
    margin: 0 0 0 30px;
    padding: 0;
}

ul, ol {
    margin: 10px 0 10px 30px;
    padding: 0;
}

pre {
    background: #EEE;
    padding: 7px 30px;
    margin: 15px 0px;
    line-height: 1.3em;
}

dl pre, blockquote pre, li pre {
    margin-left: 0;
    padding-left: 30px;
}

dl dl pre {
    margin-left: -90px;
    padding-left: 90px;
}

tt, code {
    background-color: #ecf0f3;
    color: #222;
    /* padding: 1px 2px; */
}

tt.xref, code.xref, a tt {
    background-color: #FBFBFB;
    border-bottom: 1px solid white;
}

a.reference {
    text-decoration: none;
    border-bottom: 1px dotted #004B6B;
}

a.reference:hover {
    border-bottom: 1px solid #6D4100;
}

a.footnote-reference {
    text-decoration: none;
    font-size: 0.7em;
    vertical-align: top;
    border-bottom: 1px dotted #004B6B;
}

a.footnote-reference:hover {
    border-bottom: 1px solid #6D4100;
}

a:hover tt, a:hover code {
    background: #EEE;
}


@media screen and (max-width: 870px) {

    div.sphinxsidebar {
    	display: none;
    }

    div.document {
       width: 100%;

    }

    div.documentwrapper {
    	margin-left: 0;
    	margin-top: 0;
    	margin-right: 0;
    	margin-bottom: 0;
    }

    div.bodywrapper {
    	margin-top: 0;
    	margin-right: 0;
    	margin-bottom: 0;
    	margin-left: 0;
    }

    ul {
    	margin-left: 0;
    }

    .document {
    	width: auto;
    }

    .footer {
    	width: auto;
    }

    .bodywrapper {
    	margin: 0;
    }

    .footer {
    	width: auto;
    }

    .github {
        display: none;
    }



}



@media screen and (max-width: 875px) {

    body {
        margin: 0;
        padding: 20px 30px;
    }

    div.documentwrapper {
        float: none;
        background: white;
    }

    div.sphinxsidebar {
        display: block;
        float: none;
        width: 102.5%;
        margin: 50px -30px -20px -30px;
        padding: 10px 20px;
        background: #333;
        color: #FFF;
    }

    div.sphinxsidebar h3, div.sphinxsidebar h4, div.sphinxsidebar p,
    div.sphinxsidebar h3 a {
        color: white;
    }

    div.sphinxsidebar a {
        color: #AAA;
    }

    div.sphinxsidebar p.logo {
        display: none;
    }

    div.document {
        width: 100%;
        margin: 0;
    }

    div.footer {
        display: none;
    }

    div.bodywrapper {
        margin: 0;
    }

    div.body {
        min-height: 0;
        padding: 0;
    }

    .rtd_doc_footer {
        display: none;
    }

    .document {
        width: auto;
    }

    .footer {
        width: auto;
    }

    .footer {
        width: auto;
    }

    .github {
        display: none;
    }
}


/* misc. */

.revsys-inline {
    display: none!important;
}

/* Make nested-list/multi-paragraph items look better in Releases changelog
 * pages. Without this, docutils' magical list fuckery causes inconsistent
 * formatting between different release sub-lists.
 */
div#changelog > div.section > ul > li > p:only-child {
    margin-bottom: 0;
}

/* Hide fugly table cell borders in ..bibliography:: directive output */
table.docutils.citation, table.docutils.citation td, table.docutils.citation th {
  border: none;
  /* Below needed in some edge cases; if not applied, bottom shadows appear */
  -moz-box-shadow: none;
  -webkit-box-shadow: none;
  box-shadow: none;
}

          .highlight .hll { background-color: #ffffcc }
.highlight  { background: #eeffcc; }
.highlight .c { color: #408090; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #007020; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408090; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408090; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #007020 } /* Comment.Preproc */
.highlight .cpf { color: #408090; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408090; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408090; background-color: #fff0f0 } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #333333 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #007020; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #007020 } /* Keyword.Pseudo */
.highlight .kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #902000 } /* Keyword.Type */
.highlight .m { color: #208050 } /* Literal.Number */
.highlight .s { color: #4070a0 } /* Literal.String */
.highlight .na { color: #4070a0 } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #0e84b5; font-weight: bold } /* Name.Class */
.highlight .no { color: #60add5 } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #d55537; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #007020 } /* Name.Exception */
.highlight .nf { color: #06287e } /* Name.Function */
.highlight .nl { color: #002070; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #062873; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #bb60d5 } /* Name.Variable */
.highlight .ow { color: #007020; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #208050 } /* Literal.Number.Bin */
.highlight .mf { color: #208050 } /* Literal.Number.Float */
.highlight .mh { color: #208050 } /* Literal.Number.Hex */
.highlight .mi { color: #208050 } /* Literal.Number.Integer */
.highlight .mo { color: #208050 } /* Literal.Number.Oct */
.highlight .sb { color: #4070a0 } /* Literal.String.Backtick */
.highlight .sc { color: #4070a0 } /* Literal.String.Char */
.highlight .sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #4070a0 } /* Literal.String.Double */
.highlight .se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #4070a0 } /* Literal.String.Heredoc */
.highlight .si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
.highlight .sx { color: #c65d09 } /* Literal.String.Other */
.highlight .sr { color: #235388 } /* Literal.String.Regex */
.highlight .s1 { color: #4070a0 } /* Literal.String.Single */
.highlight .ss { color: #517918 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #bb60d5 } /* Name.Variable.Class */
.highlight .vg { color: #bb60d5 } /* Name.Variable.Global */
.highlight .vi { color: #bb60d5 } /* Name.Variable.Instance */
.highlight .il { color: #208050 } /* Literal.Number.Integer.Long */
      </style>

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="Pascal&#39;s Triangle 0.0.1 documentation" href="#" />
    <link rel="next" title="&lt;no title&gt;" href="limitation_test.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="pascal-s-triangle">
<h1>Pascal&#8217;s Triangle<a class="headerlink" href="#pascal-s-triangle" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>This article is about <a class="reference external" href="http://en.wikipedia.org/wiki/Pascal%27s_triangle">Pascal&#8217;s Triangle</a>
building algorithm implementations, their performance and limitations analysis. The article shows
some techniques for performance optimization that can be used for solving real life software
optimization problems.</p>
<p>Programming languages:</p>
<ul class="simple">
<li>Python (CPython and PyPy implementations)</li>
<li>Cython</li>
<li>C</li>
<li>Assembler</li>
</ul>
<p>Optimization techniques used:</p>
<ul class="simple">
<li>Microoptimizations</li>
<li>Replace recursive algorithm with non-recursive</li>
<li>Replace Python with other programming languages</li>
</ul>
</div>
<div class="section" id="conclusions">
<h2>Conclusions<a class="headerlink" href="#conclusions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>It is possible to improve performance for more than 200 times if you are ready to switch from CPython to C or Assembler</li>
<li>You probably should not try to implement your algorithm in Assembler for better performance unless you are as proficient in Assembler as a C-compiler developer, otherwise just use compiler optimization options</li>
<li>It was possible to improve CPython implementation by 40% by switching to non-recursive implementation and other language specific optimizations</li>
<li>It is possible to improve performance by 20-50% by switching to Cython with no changes to source code</li>
<li>It is possible to improve performance for 2-7 times by switching to PyPy with no changes to source code</li>
<li>As expected from fastest to slowest: Assembler and C, PyPy, Cython, CPython</li>
<li>You should always check if your performance optimization leads to improvement, because sometime unexpectedly they lead to performance degradation</li>
<li>Faster implementations may have limitations that make them impractical. For example <a class="reference internal" href="#cpascaltrianglefullasm">CPascalTriangleFullAsm</a> has the best time performance, but limited to 34 height. Therefore it is more practical to cache or precalculate Pascal&#8217;s Triangle of this height and return result from memory which would would run even faster than the Assembler implementation.</li>
</ul>
</div>
<div class="section" id="implementation-notes">
<h2>Implementation Notes<a class="headerlink" href="#implementation-notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Complete source code can be found in <a class="reference external" href="https://github.com/dmugtasimov/pascal_triangle">pascal_triangle</a> github repository</li>
<li>This article is automatically generated with <a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a></li>
<li>Metaclasses are used for unit-testing variety of solutions of the same problem</li>
<li>Specific property of Pascal&#8217;s Triangle is used to test the solutions: sum of line&#8217;s integers is equal to 2 to the power of line number</li>
<li>cythonize() tries to compile *.pyx files before Cython is installed according to setup_requires argument of setup(), so there is a need to have a LazyList() as work around</li>
<li>Cython is incompatible with PyPy, so there is a need to check for python implementation being used</li>
<li>It is important to set constant CPU frequency to get stable benchmark results</li>
</ul>
</div>
<div class="section" id="full-story">
<h2>Full story<a class="headerlink" href="#full-story" title="Permalink to this headline">¶</a></h2>
<p>The basic definition of Pascal&#8217;s Triangle is the following:</p>
<p><em>Pascal’s Triangle is a triangle formed of lines of integer numbers.
Each line has one more integer than the previous line and centered
with the previous line. First line has only one integer with value of 1.
Every integer in each line is a sum of two above integers.</em></p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>      1
    1   1
   1  2  1
  1 3   3 1
 1 4  6  4 1
1 5 10 10 5 1
</pre></div>
</div>
<p>For more strict mathematical definition, please, see <a class="reference external" href="http://en.wikipedia.org/wiki/Pascal%27s_triangle">Pascal’s Triangle</a>
wikipedia article.</p>
<p>Here is the code that I produced on a job interview when I was asked to code a program in Python
that prints Pascal&#8217;s Triangle:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">print_pascal_triangle_original</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Print Pascal&#39;s Triangle of height n: original interview solution.</span>
<span class="sd">    :param n: height of the triangle to print</span>
<span class="sd">    :return: n-th line of Pascal&#39;s Triangle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">print_pascal_triangle_original</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="k">print</span> <span class="n">b</span>
    <span class="k">return</span> <span class="n">b</span>
</pre></div>
</div>
<p>For the purpose of this article I made small changes to my original implementation
(zero-based lines and function is converted to a class method):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">PyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleOriginal</span><span class="p">(</span><span class="n">PyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modified original solution presented on interview.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">original</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">900</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">height</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">b</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="limitations">
<h3>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h3>
<p>When I started implementation of the Pascal&#8217;s Triangle building algorithm it turned out that
different implementations have their own limitations. Therefore limitations should be described
first.</p>
<p>Here is the result of limitation test:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python -m pascal_triangle.tests.limitation_test
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="2%" />
<col width="29%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="6%" />
<col width="38%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>#</td>
<td>Implementation</td>
<td>Language</td>
<td>Height limit</td>
<td>Duration, s</td>
<td>Reason</td>
<td>Info</td>
</tr>
<tr class="row-even"><td>1</td>
<td><a class="reference internal" href="#pypascaltriangleoriginal">PyPascalTriangleOriginal</a></td>
<td>Python</td>
<td>993</td>
<td>0.053755</td>
<td>exception</td>
<td>RuntimeError(&#8216;maximum recursion depth exceeded&#8217;,)</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><a class="reference internal" href="#pypascaltriangleoriginalplus">PyPascalTriangleOriginalPlus</a></td>
<td>Python</td>
<td>993</td>
<td>0.053977</td>
<td>exception</td>
<td>RuntimeError(&#8216;maximum recursion depth exceeded&#8217;,)</td>
</tr>
<tr class="row-even"><td>3</td>
<td><a class="reference internal" href="#pypascaltriangleconstantlists">PyPascalTriangleConstantLists</a></td>
<td>Python</td>
<td>993</td>
<td>0.054690</td>
<td>exception</td>
<td>RuntimeError(&#8216;maximum recursion depth exceeded&#8217;,)</td>
</tr>
<tr class="row-odd"><td>4</td>
<td><a class="reference internal" href="#pypascaltriangleconstanttuples">PyPascalTriangleConstantTuples</a></td>
<td>Python</td>
<td>993</td>
<td>0.070621</td>
<td>exception</td>
<td>RuntimeError(&#8216;maximum recursion depth exceeded&#8217;,)</td>
</tr>
<tr class="row-even"><td>5</td>
<td><a class="reference internal" href="#pypascaltriangleiterators">PyPascalTriangleIterators</a></td>
<td>Python</td>
<td>993</td>
<td>0.047875</td>
<td>exception</td>
<td>RuntimeError(&#8216;maximum recursion depth exceeded&#8217;,)</td>
</tr>
<tr class="row-odd"><td>6</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a></td>
<td>Python</td>
<td>3072</td>
<td>0.746115</td>
<td>timeout</td>
<td>1.000000 s, (duration: 1.474587 s)</td>
</tr>
<tr class="row-even"><td>7</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclike">PyPascalTriangleNonRecursiveCLike</a></td>
<td>Python</td>
<td>3072</td>
<td>0.935708</td>
<td>timeout</td>
<td>1.000000 s, (duration: 1.883892 s)</td>
</tr>
<tr class="row-odd"><td>8</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclikeimproved">PyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Python</td>
<td>3072</td>
<td>0.846512</td>
<td>timeout</td>
<td>1.000000 s, (duration: 1.728939 s)</td>
</tr>
<tr class="row-even"><td>9</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Python</td>
<td>3072</td>
<td>0.729132</td>
<td>timeout</td>
<td>1.000000 s, (duration: 1.533341 s)</td>
</tr>
<tr class="row-odd"><td>10</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivearray">PyPascalTriangleNonRecursiveArray</a></td>
<td>Python</td>
<td>34</td>
<td>0.000096</td>
<td>exception</td>
<td>OverflowError(&#8216;unsigned int is greater than maximum&#8217;,)</td>
</tr>
<tr class="row-even"><td>11</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveiterators">PyPascalTriangleNonRecursiveIterators</a></td>
<td>Python</td>
<td>3072</td>
<td>0.678832</td>
<td>timeout</td>
<td>1.000000 s, (duration: 1.382548 s)</td>
</tr>
<tr class="row-odd"><td>12</td>
<td><a class="reference internal" href="#cypascaltriangleiterators">CyPascalTriangleIterators</a></td>
<td>Cython</td>
<td>992</td>
<td>0.036476</td>
<td>exception</td>
<td>RuntimeError(&#8216;maximum recursion depth exceeded&#8217;,)</td>
</tr>
<tr class="row-even"><td>13</td>
<td><a class="reference internal" href="#cypascaltriangleconstantlists">CyPascalTriangleConstantLists</a></td>
<td>Cython</td>
<td>992</td>
<td>0.043471</td>
<td>exception</td>
<td>RuntimeError(&#8216;maximum recursion depth exceeded&#8217;,)</td>
</tr>
<tr class="row-odd"><td>14</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursive">CyPascalTriangleNonRecursive</a></td>
<td>Cython</td>
<td>3072</td>
<td>0.610665</td>
<td>timeout</td>
<td>1.000000 s, (duration: 1.275582 s)</td>
</tr>
<tr class="row-even"><td>15</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveiterators">CyPascalTriangleNonRecursiveIterators</a></td>
<td>Cython</td>
<td>3072</td>
<td>0.552308</td>
<td>timeout</td>
<td>1.000000 s, (duration: 1.181184 s)</td>
</tr>
<tr class="row-odd"><td>16</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveclikeimproved">CyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Cython</td>
<td>3072</td>
<td>0.690947</td>
<td>timeout</td>
<td>1.000000 s, (duration: 1.453662 s)</td>
</tr>
<tr class="row-even"><td>17</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveclikemoreimproved">CyPascalTriangleNonRecursiveCLikeMoreImproved</a></td>
<td>Cython</td>
<td>3072</td>
<td>0.728800</td>
<td>timeout</td>
<td>1.000000 s, (duration: 1.485473 s)</td>
</tr>
<tr class="row-odd"><td>18</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursivelessclike">CyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Cython</td>
<td>3072</td>
<td>0.614456</td>
<td>timeout</td>
<td>1.000000 s, (duration: 1.314016 s)</td>
</tr>
<tr class="row-even"><td>19</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursivectypes">CyPascalTriangleNonRecursiveCTypes</a></td>
<td>Cython</td>
<td>34</td>
<td>0.000044</td>
<td>exception</td>
<td>OverflowError(&#8216;unsigned int is greater than maximum&#8217;,)</td>
</tr>
<tr class="row-odd"><td>20</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursivectypesulong">CyPascalTriangleNonRecursiveCTypesULong</a></td>
<td>Cython</td>
<td>67</td>
<td>0.000178</td>
<td>exception</td>
<td>OverflowError(&#8216;long int too large to convert&#8217;,)</td>
</tr>
<tr class="row-even"><td>21</td>
<td><a class="reference internal" href="#cpascaltriangleinitial">CPascalTriangleInitial</a></td>
<td>C</td>
<td>34</td>
<td>0.000002</td>
<td>exception</td>
<td>ValueError(&#8220;Unable to build Pascal&#8217;s Triangle higher than 34&#8221;,)</td>
</tr>
<tr class="row-odd"><td>22</td>
<td><a class="reference internal" href="#cpascaltriangleulong">CPascalTriangleULong</a></td>
<td>C</td>
<td>67</td>
<td>0.000006</td>
<td>exception</td>
<td>ValueError(&#8220;Unable to build Pascal&#8217;s Triangle higher than 67&#8221;,)</td>
</tr>
<tr class="row-even"><td>23</td>
<td><a class="reference internal" href="#cpascaltrianglepartialasm">CPascalTrianglePartialAsm</a></td>
<td>C/Assembler</td>
<td>34</td>
<td>0.000003</td>
<td>exception</td>
<td>ValueError(&#8220;Unable to build Pascal&#8217;s Triangle higher than 34&#8221;,)</td>
</tr>
<tr class="row-odd"><td>24</td>
<td><a class="reference internal" href="#cpascaltrianglefullasm">CPascalTriangleFullAsm</a></td>
<td>C/Assembler</td>
<td>34</td>
<td>0.000002</td>
<td>exception</td>
<td>ValueError(&#8220;Unable to build Pascal&#8217;s Triangle higher than 34&#8221;,)</td>
</tr>
</tbody>
</table>
<p>As seen from the table there are several thresholds of triangle height limitation:</p>
<ul class="simple">
<li>34 is a height limit for all algorithms that use unsigned 32-bit integers to store resulting lines.</li>
<li>67 is a height limit for all algorithms that use unsigned 64-bit integers to store resulting lines.</li>
<li>A just below 1000 height limit is valid for all recursive algorithms in Python since the default recursion limit in python is 1000 frames.</li>
<li>The other implementations are virtually limited by the time required for calculation (1 second).</li>
</ul>
<p>From practical point of view limit of 34 and 67 height makes corresponding algorithms
useless since lines Pascal&#8217;s Triangle of 67 height can be precomputed and stored in
memory with any other algorithm. It would take just (height + 2) * (height + 1) / 2 * 8 =
(67 + 2) * (67 + 1) / 2 * 8 = 18 768 bytes for 64-bit implementation.</p>
<p>So all optimizations that are limited by 64-height make only scientific interest.</p>
<p>Another conclusion from limitation test is that we can only compare implementations for particular
heights. There will be 4 benchmarks of different heights: 34, 67, 900, 3000.</p>
</div>
<div class="section" id="performance">
<h3>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h3>
<div class="section" id="cpython">
<h4>CPython<a class="headerlink" href="#cpython" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The best implementation is Assembler x86 implementation</li>
<li>Non-recursive implementations do better than recursive implementations</li>
<li>Cython implementations do better than Python implementations</li>
<li>C implementations do better than Cython implementations</li>
<li>Assembler x86 implementation does better than C implementations</li>
<li>Best implementation is about 100 times faster than the original implementation</li>
<li>Best C implementation is about 50 times faster than the original implementation</li>
<li>Best Cython implementation is about 90% faster than the original implementation</li>
<li>Best Python implementation is about 40% faster than the original implementation</li>
<li><a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a>, <a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a> and <a class="reference internal" href="#pypascaltrianglenonrecursiveclikeimproved">PyPascalTriangleNonRecursiveCLikeImproved</a> are three best Python implementations</li>
<li>Cython implementation that used C type is not the best Cython implementation</li>
<li>32-bit vs 64-bit integers do not make notable difference</li>
<li>Sometimes more optimized Python implementation can do better than less optimized Cython implementation</li>
<li>Some &#8220;optimizations&#8221; lead to up to 30% performance loss</li>
</ul>
<p>Each implementation.build(34) called for 1000 times (ordered by performance)</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="39%" />
<col width="10%" />
<col width="13%" />
<col width="20%" />
<col width="15%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>#</td>
<td>Implementation</td>
<td>Language</td>
<td>Duration, secs</td>
<td>Fraction of (*) duration</td>
<td>% faster than (*)</td>
</tr>
<tr class="row-even"><td>1</td>
<td><a class="reference internal" href="#cpascaltrianglefullasm">CPascalTriangleFullAsm</a></td>
<td>C/Assembler</td>
<td>0.000718</td>
<td>0.009341</td>
<td>10606.042497</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><a class="reference internal" href="#cpascaltrianglepartialasm">CPascalTrianglePartialAsm</a></td>
<td>C/Assembler</td>
<td>0.001081</td>
<td>0.014060</td>
<td>7012.174680</td>
</tr>
<tr class="row-even"><td>3</td>
<td><a class="reference internal" href="#cpascaltriangleulong">CPascalTriangleULong</a></td>
<td>C</td>
<td>0.001115</td>
<td>0.014504</td>
<td>6794.718837</td>
</tr>
<tr class="row-odd"><td>4</td>
<td><a class="reference internal" href="#cpascaltriangleinitial">CPascalTriangleInitial</a></td>
<td>C</td>
<td>0.001393</td>
<td>0.018117</td>
<td>5419.787744</td>
</tr>
<tr class="row-even"><td>5</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursive">CyPascalTriangleNonRecursive</a></td>
<td>Cython</td>
<td>0.040292</td>
<td>0.524077</td>
<td>90.811671</td>
</tr>
<tr class="row-odd"><td>6</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursivectypes">CyPascalTriangleNonRecursiveCTypes</a></td>
<td>Cython</td>
<td>0.041818</td>
<td>0.543927</td>
<td>83.848162</td>
</tr>
<tr class="row-even"><td>7</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveclikeimproved">CyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Cython</td>
<td>0.042011</td>
<td>0.546433</td>
<td>83.005119</td>
</tr>
<tr class="row-odd"><td>8</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursivelessclike">CyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Cython</td>
<td>0.042353</td>
<td>0.550883</td>
<td>81.526787</td>
</tr>
<tr class="row-even"><td>9</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveclikemoreimproved">CyPascalTriangleNonRecursiveCLikeMoreImproved</a></td>
<td>Cython</td>
<td>0.042596</td>
<td>0.554046</td>
<td>80.490426</td>
</tr>
<tr class="row-odd"><td>10</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursivectypesulong">CyPascalTriangleNonRecursiveCTypesULong</a></td>
<td>Cython</td>
<td>0.045652</td>
<td>0.593793</td>
<td>68.408903</td>
</tr>
<tr class="row-even"><td>11</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveiterators">CyPascalTriangleNonRecursiveIterators</a></td>
<td>Cython</td>
<td>0.049919</td>
<td>0.649293</td>
<td>54.013612</td>
</tr>
<tr class="row-odd"><td>12</td>
<td><a class="reference internal" href="#cypascaltriangleiterators">CyPascalTriangleIterators</a></td>
<td>Cython</td>
<td>0.052587</td>
<td>0.683998</td>
<td>46.199324</td>
</tr>
<tr class="row-even"><td>13</td>
<td><a class="reference internal" href="#cypascaltriangleconstantlists">CyPascalTriangleConstantLists</a></td>
<td>Cython</td>
<td>0.053835</td>
<td>0.700229</td>
<td>42.810452</td>
</tr>
<tr class="row-odd"><td>14</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a></td>
<td>Python</td>
<td>0.054130</td>
<td>0.704068</td>
<td>42.031730</td>
</tr>
<tr class="row-even"><td>15</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Python</td>
<td>0.055244</td>
<td>0.718556</td>
<td>39.167925</td>
</tr>
<tr class="row-odd"><td>16</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclikeimproved">PyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Python</td>
<td>0.064518</td>
<td>0.839183</td>
<td>19.163513</td>
</tr>
<tr class="row-even"><td>17</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveiterators">PyPascalTriangleNonRecursiveIterators</a></td>
<td>Python</td>
<td>0.065121</td>
<td>0.847029</td>
<td>18.059735</td>
</tr>
<tr class="row-odd"><td>18</td>
<td><a class="reference internal" href="#pypascaltriangleconstantlists">PyPascalTriangleConstantLists</a></td>
<td>Python</td>
<td>0.071139</td>
<td>0.925304</td>
<td>8.072619</td>
</tr>
<tr class="row-even"><td>19</td>
<td><a class="reference internal" href="#pypascaltriangleiterators">PyPascalTriangleIterators</a></td>
<td>Python</td>
<td>0.071390</td>
<td>0.928566</td>
<td>7.692924</td>
</tr>
<tr class="row-odd"><td>20</td>
<td><a class="reference internal" href="#pypascaltriangleoriginalplus">PyPascalTriangleOriginalPlus</a></td>
<td>Python</td>
<td>0.073988</td>
<td>0.962359</td>
<td>3.911345</td>
</tr>
<tr class="row-even"><td>21</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclike">PyPascalTriangleNonRecursiveCLike</a></td>
<td>Python</td>
<td>0.074031</td>
<td>0.962920</td>
<td>3.850774</td>
</tr>
<tr class="row-odd"><td>22</td>
<td><a class="reference internal" href="#pypascaltriangleoriginal">PyPascalTriangleOriginal</a></td>
<td>Python</td>
<td>0.076882</td>
<td>1.000000</td>
<td>0.000000</td>
</tr>
<tr class="row-even"><td>23</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivearray">PyPascalTriangleNonRecursiveArray</a></td>
<td>Python</td>
<td>0.092010</td>
<td>1.196771</td>
<td>-16.441835</td>
</tr>
<tr class="row-odd"><td>24</td>
<td><a class="reference internal" href="#pypascaltriangleconstanttuples">PyPascalTriangleConstantTuples</a></td>
<td>Python</td>
<td>0.108509</td>
<td>1.411371</td>
<td>-29.146882</td>
</tr>
</tbody>
</table>
<p>Each implementation.build(67) called for 1000 times (ordered by performance)</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="40%" />
<col width="8%" />
<col width="13%" />
<col width="21%" />
<col width="15%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>#</td>
<td>Implementation</td>
<td>Language</td>
<td>Duration, secs</td>
<td>Fraction of (*) duration</td>
<td>% faster than (*)</td>
</tr>
<tr class="row-even"><td>1</td>
<td><a class="reference internal" href="#cpascaltriangleulong">CPascalTriangleULong</a></td>
<td>C</td>
<td>0.004018</td>
<td>0.017983</td>
<td>5460.716829</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursive">CyPascalTriangleNonRecursive</a></td>
<td>Cython</td>
<td>0.132844</td>
<td>0.594593</td>
<td>68.182373</td>
</tr>
<tr class="row-even"><td>3</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursivelessclike">CyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Cython</td>
<td>0.136494</td>
<td>0.610929</td>
<td>63.685050</td>
</tr>
<tr class="row-odd"><td>4</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveiterators">CyPascalTriangleNonRecursiveIterators</a></td>
<td>Cython</td>
<td>0.145995</td>
<td>0.653455</td>
<td>53.032839</td>
</tr>
<tr class="row-even"><td>5</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveclikeimproved">CyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Cython</td>
<td>0.149224</td>
<td>0.667908</td>
<td>49.721277</td>
</tr>
<tr class="row-odd"><td>6</td>
<td><a class="reference internal" href="#cypascaltriangleiterators">CyPascalTriangleIterators</a></td>
<td>Cython</td>
<td>0.151895</td>
<td>0.679863</td>
<td>47.088499</td>
</tr>
<tr class="row-even"><td>7</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveclikemoreimproved">CyPascalTriangleNonRecursiveCLikeMoreImproved</a></td>
<td>Cython</td>
<td>0.163172</td>
<td>0.730337</td>
<td>36.923084</td>
</tr>
<tr class="row-odd"><td>8</td>
<td><a class="reference internal" href="#cypascaltriangleconstantlists">CyPascalTriangleConstantLists</a></td>
<td>Cython</td>
<td>0.167823</td>
<td>0.751154</td>
<td>33.128569</td>
</tr>
<tr class="row-even"><td>9</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursivectypesulong">CyPascalTriangleNonRecursiveCTypesULong</a></td>
<td>Cython</td>
<td>0.178073</td>
<td>0.797033</td>
<td>25.465361</td>
</tr>
<tr class="row-odd"><td>10</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Python</td>
<td>0.185789</td>
<td>0.831567</td>
<td>20.254859</td>
</tr>
<tr class="row-even"><td>11</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a></td>
<td>Python</td>
<td>0.186182</td>
<td>0.833327</td>
<td>20.000922</td>
</tr>
<tr class="row-odd"><td>12</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveiterators">PyPascalTriangleNonRecursiveIterators</a></td>
<td>Python</td>
<td>0.196337</td>
<td>0.878779</td>
<td>13.794221</td>
</tr>
<tr class="row-even"><td>13</td>
<td><a class="reference internal" href="#pypascaltriangleiterators">PyPascalTriangleIterators</a></td>
<td>Python</td>
<td>0.211882</td>
<td>0.948357</td>
<td>5.445494</td>
</tr>
<tr class="row-odd"><td>14</td>
<td><a class="reference internal" href="#pypascaltriangleconstantlists">PyPascalTriangleConstantLists</a></td>
<td>Python</td>
<td>0.220266</td>
<td>0.985882</td>
<td>1.432032</td>
</tr>
<tr class="row-even"><td>15</td>
<td><a class="reference internal" href="#pypascaltriangleoriginal">PyPascalTriangleOriginal</a></td>
<td>Python</td>
<td>0.223420</td>
<td>1.000000</td>
<td>0.000000</td>
</tr>
<tr class="row-odd"><td>16</td>
<td><a class="reference internal" href="#pypascaltriangleoriginalplus">PyPascalTriangleOriginalPlus</a></td>
<td>Python</td>
<td>0.224271</td>
<td>1.003808</td>
<td>-0.379308</td>
</tr>
<tr class="row-even"><td>17</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclikeimproved">PyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Python</td>
<td>0.234445</td>
<td>1.049345</td>
<td>-4.702476</td>
</tr>
<tr class="row-odd"><td>18</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclike">PyPascalTriangleNonRecursiveCLike</a></td>
<td>Python</td>
<td>0.270704</td>
<td>1.211637</td>
<td>-17.467005</td>
</tr>
<tr class="row-even"><td>19</td>
<td><a class="reference internal" href="#pypascaltriangleconstanttuples">PyPascalTriangleConstantTuples</a></td>
<td>Python</td>
<td>0.322150</td>
<td>1.441902</td>
<td>-30.647168</td>
</tr>
</tbody>
</table>
<p>Each implementation.build(900) called for 5 times (ordered by performance)</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="40%" />
<col width="8%" />
<col width="13%" />
<col width="21%" />
<col width="15%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>#</td>
<td>Implementation</td>
<td>Language</td>
<td>Duration, secs</td>
<td>Fraction of (*) duration</td>
<td>% faster than (*)</td>
</tr>
<tr class="row-even"><td>1</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveiterators">CyPascalTriangleNonRecursiveIterators</a></td>
<td>Cython</td>
<td>0.140652</td>
<td>0.651107</td>
<td>53.584705</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><a class="reference internal" href="#cypascaltriangleiterators">CyPascalTriangleIterators</a></td>
<td>Cython</td>
<td>0.141067</td>
<td>0.653028</td>
<td>53.132785</td>
</tr>
<tr class="row-even"><td>3</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursivelessclike">CyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Cython</td>
<td>0.164642</td>
<td>0.762161</td>
<td>31.205923</td>
</tr>
<tr class="row-odd"><td>4</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursive">CyPascalTriangleNonRecursive</a></td>
<td>Cython</td>
<td>0.169332</td>
<td>0.783872</td>
<td>27.571773</td>
</tr>
<tr class="row-even"><td>5</td>
<td><a class="reference internal" href="#cypascaltriangleconstantlists">CyPascalTriangleConstantLists</a></td>
<td>Cython</td>
<td>0.170383</td>
<td>0.788738</td>
<td>26.784890</td>
</tr>
<tr class="row-odd"><td>6</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveiterators">PyPascalTriangleNonRecursiveIterators</a></td>
<td>Python</td>
<td>0.186486</td>
<td>0.863282</td>
<td>15.837040</td>
</tr>
<tr class="row-even"><td>7</td>
<td><a class="reference internal" href="#pypascaltriangleiterators">PyPascalTriangleIterators</a></td>
<td>Python</td>
<td>0.186617</td>
<td>0.863888</td>
<td>15.755793</td>
</tr>
<tr class="row-odd"><td>8</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveclikeimproved">CyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Cython</td>
<td>0.194658</td>
<td>0.901112</td>
<td>10.974028</td>
</tr>
<tr class="row-even"><td>9</td>
<td><a class="reference internal" href="#pypascaltriangleoriginalplus">PyPascalTriangleOriginalPlus</a></td>
<td>Python</td>
<td>0.213122</td>
<td>0.986585</td>
<td>1.359775</td>
</tr>
<tr class="row-odd"><td>10</td>
<td><a class="reference internal" href="#pypascaltriangleoriginal">PyPascalTriangleOriginal</a></td>
<td>Python</td>
<td>0.216020</td>
<td>1.000000</td>
<td>0.000000</td>
</tr>
<tr class="row-even"><td>11</td>
<td><a class="reference internal" href="#pypascaltriangleconstantlists">PyPascalTriangleConstantLists</a></td>
<td>Python</td>
<td>0.217825</td>
<td>1.008356</td>
<td>-0.828678</td>
</tr>
<tr class="row-odd"><td>12</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Python</td>
<td>0.219190</td>
<td>1.014675</td>
<td>-1.446241</td>
</tr>
<tr class="row-even"><td>13</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveclikemoreimproved">CyPascalTriangleNonRecursiveCLikeMoreImproved</a></td>
<td>Cython</td>
<td>0.220848</td>
<td>1.022351</td>
<td>-2.186215</td>
</tr>
<tr class="row-odd"><td>14</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a></td>
<td>Python</td>
<td>0.222758</td>
<td>1.031192</td>
<td>-3.024890</td>
</tr>
<tr class="row-even"><td>15</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclikeimproved">PyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Python</td>
<td>0.273294</td>
<td>1.265133</td>
<td>-20.956958</td>
</tr>
<tr class="row-odd"><td>16</td>
<td><a class="reference internal" href="#pypascaltriangleconstanttuples">PyPascalTriangleConstantTuples</a></td>
<td>Python</td>
<td>0.284513</td>
<td>1.317069</td>
<td>-24.073813</td>
</tr>
<tr class="row-even"><td>17</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclike">PyPascalTriangleNonRecursiveCLike</a></td>
<td>Python</td>
<td>0.310638</td>
<td>1.438006</td>
<td>-30.459280</td>
</tr>
</tbody>
</table>
<p>Each implementation.build(3000) called for 5 times (ordered by performance)</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="40%" />
<col width="8%" />
<col width="13%" />
<col width="21%" />
<col width="15%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>#</td>
<td>Implementation</td>
<td>Language</td>
<td>Duration, secs</td>
<td>Fraction of (*) duration</td>
<td>% faster than (*)</td>
</tr>
<tr class="row-even"><td>1</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveiterators">CyPascalTriangleNonRecursiveIterators</a></td>
<td>Cython</td>
<td>2.492651</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursive">CyPascalTriangleNonRecursive</a></td>
<td>Cython</td>
<td>2.849843</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>3</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursivelessclike">CyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Cython</td>
<td>2.858547</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>4</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveiterators">PyPascalTriangleNonRecursiveIterators</a></td>
<td>Python</td>
<td>3.019004</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>5</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveclikeimproved">CyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Cython</td>
<td>3.216158</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>6</td>
<td><a class="reference internal" href="#cypascaltrianglenonrecursiveclikemoreimproved">CyPascalTriangleNonRecursiveCLikeMoreImproved</a></td>
<td>Cython</td>
<td>3.429079</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>7</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Python</td>
<td>3.462906</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>8</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a></td>
<td>Python</td>
<td>3.464945</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>9</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclikeimproved">PyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Python</td>
<td>4.003433</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>10</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclike">PyPascalTriangleNonRecursiveCLike</a></td>
<td>Python</td>
<td>4.414496</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="pypy">
<h4>PyPy<a class="headerlink" href="#pypy" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>C-like Python implementations interpreted with PyPy do better than interpreted with CPython</li>
<li><a class="reference internal" href="#pypascaltrianglenonrecursiveclike">PyPascalTriangleNonRecursiveCLike</a>, <a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a> and <a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a>  are three best Python implementations interpreted with PyPy</li>
<li>Best Python implementation is about 300% faster than the original implementation with PyPy</li>
<li>It is easier to gain higher performance increase for Python with PyPy than with CPython</li>
</ul>
<p>Each implementation.build(34) called for 1000 times (ordered by performance)</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="38%" />
<col width="8%" />
<col width="13%" />
<col width="21%" />
<col width="16%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>#</td>
<td>Implementation</td>
<td>Language</td>
<td>Duration, secs</td>
<td>Fraction of (*) duration</td>
<td>% faster than (*)</td>
</tr>
<tr class="row-even"><td>1</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclike">PyPascalTriangleNonRecursiveCLike</a></td>
<td>Python</td>
<td>0.009965</td>
<td>0.255112</td>
<td>291.985071</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Python</td>
<td>0.011276</td>
<td>0.288669</td>
<td>246.417169</td>
</tr>
<tr class="row-even"><td>3</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a></td>
<td>Python</td>
<td>0.011767</td>
<td>0.301237</td>
<td>231.964988</td>
</tr>
<tr class="row-odd"><td>4</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclikeimproved">PyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Python</td>
<td>0.014874</td>
<td>0.380779</td>
<td>162.619819</td>
</tr>
<tr class="row-even"><td>5</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivearray">PyPascalTriangleNonRecursiveArray</a></td>
<td>Python</td>
<td>0.018903</td>
<td>0.483923</td>
<td>106.644384</td>
</tr>
<tr class="row-odd"><td>6</td>
<td><a class="reference internal" href="#pypascaltriangleconstantlists">PyPascalTriangleConstantLists</a></td>
<td>Python</td>
<td>0.033238</td>
<td>0.850908</td>
<td>17.521573</td>
</tr>
<tr class="row-even"><td>7</td>
<td><a class="reference internal" href="#pypascaltriangleoriginalplus">PyPascalTriangleOriginalPlus</a></td>
<td>Python</td>
<td>0.038394</td>
<td>0.982898</td>
<td>1.739984</td>
</tr>
<tr class="row-odd"><td>8</td>
<td><a class="reference internal" href="#pypascaltriangleoriginal">PyPascalTriangleOriginal</a></td>
<td>Python</td>
<td>0.039062</td>
<td>1.000000</td>
<td>0.000000</td>
</tr>
<tr class="row-even"><td>9</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveiterators">PyPascalTriangleNonRecursiveIterators</a></td>
<td>Python</td>
<td>0.041938</td>
<td>1.073628</td>
<td>-6.857835</td>
</tr>
<tr class="row-odd"><td>10</td>
<td><a class="reference internal" href="#pypascaltriangleconstanttuples">PyPascalTriangleConstantTuples</a></td>
<td>Python</td>
<td>0.050661</td>
<td>1.296940</td>
<td>-22.895411</td>
</tr>
<tr class="row-even"><td>11</td>
<td><a class="reference internal" href="#pypascaltriangleiterators">PyPascalTriangleIterators</a></td>
<td>Python</td>
<td>0.057787</td>
<td>1.479370</td>
<td>-32.403652</td>
</tr>
</tbody>
</table>
<p>Each implementation.build(67) called for 1000 times (ordered by performance)</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="38%" />
<col width="8%" />
<col width="13%" />
<col width="21%" />
<col width="16%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>#</td>
<td>Implementation</td>
<td>Language</td>
<td>Duration, secs</td>
<td>Fraction of (*) duration</td>
<td>% faster than (*)</td>
</tr>
<tr class="row-even"><td>1</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclikeimproved">PyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Python</td>
<td>0.021272</td>
<td>0.340252</td>
<td>193.899487</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Python</td>
<td>0.021738</td>
<td>0.347700</td>
<td>187.604058</td>
</tr>
<tr class="row-even"><td>3</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclike">PyPascalTriangleNonRecursiveCLike</a></td>
<td>Python</td>
<td>0.022324</td>
<td>0.357078</td>
<td>180.051050</td>
</tr>
<tr class="row-odd"><td>4</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a></td>
<td>Python</td>
<td>0.023544</td>
<td>0.376592</td>
<td>165.539589</td>
</tr>
<tr class="row-even"><td>5</td>
<td><a class="reference internal" href="#pypascaltriangleconstantlists">PyPascalTriangleConstantLists</a></td>
<td>Python</td>
<td>0.061327</td>
<td>0.980936</td>
<td>1.943442</td>
</tr>
<tr class="row-odd"><td>6</td>
<td><a class="reference internal" href="#pypascaltriangleoriginalplus">PyPascalTriangleOriginalPlus</a></td>
<td>Python</td>
<td>0.062375</td>
<td>0.997700</td>
<td>0.230487</td>
</tr>
<tr class="row-even"><td>7</td>
<td><a class="reference internal" href="#pypascaltriangleoriginal">PyPascalTriangleOriginal</a></td>
<td>Python</td>
<td>0.062519</td>
<td>1.000000</td>
<td>0.000000</td>
</tr>
<tr class="row-odd"><td>8</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveiterators">PyPascalTriangleNonRecursiveIterators</a></td>
<td>Python</td>
<td>0.076089</td>
<td>1.217060</td>
<td>-17.834750</td>
</tr>
<tr class="row-even"><td>9</td>
<td><a class="reference internal" href="#pypascaltriangleconstanttuples">PyPascalTriangleConstantTuples</a></td>
<td>Python</td>
<td>0.101974</td>
<td>1.631093</td>
<td>-38.691403</td>
</tr>
<tr class="row-odd"><td>10</td>
<td><a class="reference internal" href="#pypascaltriangleiterators">PyPascalTriangleIterators</a></td>
<td>Python</td>
<td>0.103806</td>
<td>1.660396</td>
<td>-39.773401</td>
</tr>
</tbody>
</table>
<p>Each implementation.build(900) called for 5 times (ordered by performance)</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="38%" />
<col width="8%" />
<col width="13%" />
<col width="21%" />
<col width="16%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>#</td>
<td>Implementation</td>
<td>Language</td>
<td>Duration, secs</td>
<td>Fraction of (*) duration</td>
<td>% faster than (*)</td>
</tr>
<tr class="row-even"><td>1</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Python</td>
<td>0.124087</td>
<td>0.269902</td>
<td>270.505017</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a></td>
<td>Python</td>
<td>0.127564</td>
<td>0.277465</td>
<td>260.405912</td>
</tr>
<tr class="row-even"><td>3</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclikeimproved">PyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Python</td>
<td>0.129059</td>
<td>0.280717</td>
<td>256.230684</td>
</tr>
<tr class="row-odd"><td>4</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclike">PyPascalTriangleNonRecursiveCLike</a></td>
<td>Python</td>
<td>0.134702</td>
<td>0.292991</td>
<td>241.307584</td>
</tr>
<tr class="row-even"><td>5</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveiterators">PyPascalTriangleNonRecursiveIterators</a></td>
<td>Python</td>
<td>0.206257</td>
<td>0.448630</td>
<td>122.900715</td>
</tr>
<tr class="row-odd"><td>6</td>
<td><a class="reference internal" href="#pypascaltriangleconstantlists">PyPascalTriangleConstantLists</a></td>
<td>Python</td>
<td>0.358617</td>
<td>0.780030</td>
<td>28.200265</td>
</tr>
<tr class="row-even"><td>7</td>
<td><a class="reference internal" href="#pypascaltriangleoriginalplus">PyPascalTriangleOriginalPlus</a></td>
<td>Python</td>
<td>0.362363</td>
<td>0.788177</td>
<td>26.875041</td>
</tr>
<tr class="row-odd"><td>8</td>
<td><a class="reference internal" href="#pypascaltriangleiterators">PyPascalTriangleIterators</a></td>
<td>Python</td>
<td>0.364880</td>
<td>0.793652</td>
<td>25.999760</td>
</tr>
<tr class="row-even"><td>9</td>
<td><a class="reference internal" href="#pypascaltriangleconstanttuples">PyPascalTriangleConstantTuples</a></td>
<td>Python</td>
<td>0.374680</td>
<td>0.814968</td>
<td>22.704246</td>
</tr>
<tr class="row-odd"><td>10</td>
<td><a class="reference internal" href="#pypascaltriangleoriginal">PyPascalTriangleOriginal</a></td>
<td>Python</td>
<td>0.459748</td>
<td>1.000000</td>
<td>0.000000</td>
</tr>
</tbody>
</table>
<p>Each implementation.build(3000) called for 5 times (ordered by performance)</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="38%" />
<col width="8%" />
<col width="13%" />
<col width="22%" />
<col width="16%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>#</td>
<td>Implementation</td>
<td>Language</td>
<td>Duration, secs</td>
<td>Fraction of (*) duration</td>
<td>% faster than (*)</td>
</tr>
<tr class="row-even"><td>1</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclikeimproved">PyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>Python</td>
<td>4.349007</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a></td>
<td>Python</td>
<td>4.362742</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>3</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a></td>
<td>Python</td>
<td>4.366922</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>4</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclike">PyPascalTriangleNonRecursiveCLike</a></td>
<td>Python</td>
<td>4.501581</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>5</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveiterators">PyPascalTriangleNonRecursiveIterators</a></td>
<td>Python</td>
<td>5.453328</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="cpython-vs-cython-vs-pypy">
<h4>CPython vs Cython vs PyPy<a class="headerlink" href="#cpython-vs-cython-vs-pypy" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>PyPy is faster than Cython</li>
<li>Cython is faster than CPython</li>
<li>Cython increases performance for tens of percents</li>
<li>PyPy increase performance in several times</li>
<li>CPython, Cython and PyPy do their best at different implementations</li>
<li><a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a> is the best for CPython</li>
<li><a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a> is the best for Cython</li>
<li><a class="reference internal" href="#pypascaltrianglenonrecursiveclike">PyPascalTriangleNonRecursiveCLike</a> is the best for PyPy</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="44%" />
<col width="12%" />
<col width="21%" />
<col width="19%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>#</td>
<td>Implementation</td>
<td>CPython, s</td>
<td>Cython, s / % faster</td>
<td>PyPy, s / % faster</td>
</tr>
<tr class="row-even"><td>1</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursive">PyPascalTriangleNonRecursive</a></td>
<td>0.054124</td>
<td>0.040927 / +32.24</td>
<td>0.011875 / +355.78</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivelessclike">PyPascalTriangleNonRecursiveLessCLike</a></td>
<td>0.054172</td>
<td>0.040580 / +33.49</td>
<td>0.011593 / +367.28</td>
</tr>
<tr class="row-even"><td>3</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclikeimproved">PyPascalTriangleNonRecursiveCLikeImproved</a></td>
<td>0.065096</td>
<td>0.043069 / +51.14</td>
<td>0.014917 / +336.39</td>
</tr>
<tr class="row-odd"><td>4</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveiterators">PyPascalTriangleNonRecursiveIterators</a></td>
<td>0.065820</td>
<td>0.049754 / +32.29</td>
<td>0.036597 / +79.85</td>
</tr>
<tr class="row-even"><td>5</td>
<td><a class="reference internal" href="#pypascaltriangleiterators">PyPascalTriangleIterators</a></td>
<td>0.072989</td>
<td>0.053422 / +36.63</td>
<td>0.059628 / +22.41</td>
</tr>
<tr class="row-odd"><td>6</td>
<td><a class="reference internal" href="#pypascaltriangleoriginalplus">PyPascalTriangleOriginalPlus</a></td>
<td>0.073143</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>0.038411 / +90.42</td>
</tr>
<tr class="row-even"><td>7</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursiveclike">PyPascalTriangleNonRecursiveCLike</a></td>
<td>0.073623</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>0.009877 / +645.40</td>
</tr>
<tr class="row-odd"><td>8</td>
<td><a class="reference internal" href="#pypascaltriangleconstantlists">PyPascalTriangleConstantLists</a></td>
<td>0.074328</td>
<td>0.054876 / +35.45</td>
<td>0.033842 / +119.63</td>
</tr>
<tr class="row-even"><td>9</td>
<td><a class="reference internal" href="#pypascaltriangleoriginal">PyPascalTriangleOriginal</a></td>
<td>0.075939</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>0.039253 / +93.46</td>
</tr>
<tr class="row-odd"><td>10</td>
<td><a class="reference internal" href="#pypascaltrianglenonrecursivearray">PyPascalTriangleNonRecursiveArray</a></td>
<td>0.092238</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>0.018299 / +404.06</td>
</tr>
<tr class="row-even"><td>11</td>
<td><a class="reference internal" href="#pypascaltriangleconstanttuples">PyPascalTriangleConstantTuples</a></td>
<td>0.105243</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>0.049954 / +110.68</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="pure-c-implementations">
<h4>Pure C implementations<a class="headerlink" href="#pure-c-implementations" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Most optimal version is more than 200 times faster than original CPython version</li>
<li>Compiler-optimized (-O3 and -Ofast options) C code runs faster than Assembler code</li>
<li>Python types conversion required for C extensions come with up to 10% overhead on function call</li>
<li>gcc optimization options may improve run time up to 3 times</li>
</ul>
<p>Compilation script:</p>
<div class="highlight-python"><div class="highlight"><pre>#!/usr/bin/env bash

set -x

gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -o ccpascal_triangle_normal ./pascal_triangle/ccpascal_triangle.c
chmod a+x ./ccpascal_triangle_normal

gcc -O2 -o ccpascal_triangle_O2 ./pascal_triangle/ccpascal_triangle.c
chmod a+x ./ccpascal_triangle_O2

gcc -O3 -o ccpascal_triangle_O3 ./pascal_triangle/ccpascal_triangle.c
chmod a+x ./ccpascal_triangle_O3

gcc -Ofast -o ccpascal_triangle_Ofast ./pascal_triangle/ccpascal_triangle.c
chmod a+x ./ccpascal_triangle_Ofast
</pre></div>
</div>
<p>Output of <code class="code docutils literal"><span class="pre">$</span> <span class="pre">./ccpascal_triangle_normal</span></code></p>
<div class="highlight-python"><div class="highlight"><pre>0.001524 seconds: 1000 times: c_print_pascal_triangle(34)
0.001165 seconds: 1000 times: c_print_pascal_triangle_ulong(34)
0.000761 seconds: 1000 times: c_print_pascal_triangle_full_asm_implementation(34)
</pre></div>
</div>
<p>Output of <code class="code docutils literal"><span class="pre">$</span> <span class="pre">./ccpascal_triangle_O2</span></code></p>
<div class="highlight-python"><div class="highlight"><pre>0.001530 seconds: 1000 times: c_print_pascal_triangle(34)
0.001279 seconds: 1000 times: c_print_pascal_triangle_ulong(34)
0.000578 seconds: 1000 times: c_print_pascal_triangle_full_asm_implementation(34)
</pre></div>
</div>
<p>Output of <code class="code docutils literal"><span class="pre">$</span> <span class="pre">./ccpascal_triangle_O3</span></code></p>
<div class="highlight-python"><div class="highlight"><pre>0.000290 seconds: 1000 times: c_print_pascal_triangle(34)
0.000340 seconds: 1000 times: c_print_pascal_triangle_ulong(34)
0.000480 seconds: 1000 times: c_print_pascal_triangle_full_asm_implementation(34)
</pre></div>
</div>
<p>Output of <code class="code docutils literal"><span class="pre">$</span> <span class="pre">./ccpascal_triangle_Ofast</span></code></p>
<div class="highlight-python"><div class="highlight"><pre>0.000291 seconds: 1000 times: c_print_pascal_triangle(34)
0.000352 seconds: 1000 times: c_print_pascal_triangle_ulong(34)
0.000538 seconds: 1000 times: c_print_pascal_triangle_full_asm_implementation(34)
</pre></div>
</div>
</div>
</div>
<div class="section" id="environment">
<h3>Environment<a class="headerlink" href="#environment" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text"><div class="highlight"><pre>Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                4
On-line CPU(s) list:   0-3
Thread(s) per core:    2
Core(s) per socket:    2
Socket(s):             1
NUMA node(s):          1
Vendor ID:             GenuineIntel
CPU family:            6
Model:                 69
Stepping:              1
CPU MHz:               2601.000
BogoMIPS:              5188.20
Virtualization:        VT-x
L1d cache:             32K
L1i cache:             32K
L2 cache:              256K
L3 cache:              3072K
NUMA node0 CPU(s):     0-3
</pre></div>
</div>
<div class="highlight-text"><div class="highlight"><pre>  current CPU frequency is 2.60 GHz.
  current CPU frequency is 2.60 GHz.
  current CPU frequency is 2.60 GHz.
  current CPU frequency is 2.60 GHz.
</pre></div>
</div>
<div class="highlight-text"><div class="highlight"><pre>Linux 3.13.0-24-generic #47-Ubuntu SMP Fri May 2 23:30:00 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux
</pre></div>
</div>
<div class="highlight-text"><div class="highlight"><pre>Linux Mint 17.2 Rafaela \n \l
</pre></div>
</div>
<div class="highlight-text"><div class="highlight"><pre>Python 2.7.6
</pre></div>
</div>
<div class="highlight-text"><div class="highlight"><pre>Cython version 0.23.4
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>
</pre></div>
</div>
<div class="highlight-text"><div class="highlight"><pre>gcc (Ubuntu 4.8.4-2ubuntu1~14.04) 4.8.4
Copyright (C) 2013 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
</pre></div>
</div>
</div>
<div class="section" id="source-code">
<h3>Source code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h3>
<p>Please, see class&#8217;s docstring and diff to review the difference with base implementation.</p>
<div class="section" id="pascaltrianglebase">
<h4>PascalTriangleBase<a class="headerlink" href="#pascaltrianglebase" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PascalTriangleBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="n">language</span> <span class="o">=</span> <span class="bp">NotImplemented</span>
    <span class="n">original</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">max_height</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">EMPTY_LIST</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">ZERO_LIST</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ONE_LIST</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">EMPTY_TUPLE</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">ZERO_TUPLE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,)</span>
    <span class="n">ONE_TUPLE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">return_list</span> <span class="o">=</span> <span class="n">return_list</span>

    <span class="k">def</span> <span class="nf">_test_print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="k">print</span> <span class="n">arg</span>

    <span class="k">def</span> <span class="nf">_print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Print Pascal&#39;s Triangle line</span>
<span class="sd">        :param arg: triangle line</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_test_print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Build Pascal&#39;s Triangle of given height.</span>
<span class="sd">        :param height: height of the triangle to print (zero-based)</span>
<span class="sd">        :return: last line of Pascal&#39;s Triangle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="pypascaltrianglebase">
<h4>PyPascalTriangleBase<a class="headerlink" href="#pypascaltrianglebase" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pascal_triangle.implementations.base</span> <span class="kn">import</span> <span class="n">PascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleBase</span><span class="p">(</span><span class="n">PascalTriangleBase</span><span class="p">):</span>

    <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;Python&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="pypascaltriangleoriginal">
<h4>PyPascalTriangleOriginal<a class="headerlink" href="#pypascaltriangleoriginal" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">PyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleOriginal</span><span class="p">(</span><span class="n">PyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modified original solution presented on interview.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">original</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">900</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">height</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">b</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
</div>
<div class="section" id="pypascaltriangleoriginalplus">
<h4>PyPascalTriangleOriginalPlus<a class="headerlink" href="#pypascaltriangleoriginalplus" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">PyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleOriginalPlus</span><span class="p">(</span><span class="n">PyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PascalTriangleOriginal`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Better naming of local variables</span>
<span class="sd">        - Fixed corner cases</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">900</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">height</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">prev_line</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="n">prev_line</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">prev_line</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prev_line</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="diff">
<h5>Diff<a class="headerlink" href="#diff" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/original.py</span>
<span class="gi">+++ ../implementations/python/original_plus.py</span>
<span class="gu">@@ -1,20 +1,25 @@</span>
 from .base import PyPascalTriangleBase
 
 
<span class="gd">-class PyPascalTriangleOriginal(PyPascalTriangleBase):</span>
<span class="gi">+class PyPascalTriangleOriginalPlus(PyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Modified original solution presented on interview.</span>
<span class="gi">+    Based on :py:class::`PascalTriangleOriginal`.</span>
<span class="gi">+</span>
<span class="gi">+    Difference:</span>
<span class="gi">+        - Better naming of local variables</span>
<span class="gi">+        - Fixed corner cases</span>
     &quot;&quot;&quot;
 
<span class="gd">-    original = True</span>
     max_height = 900
 
     def build(self, height):
<span class="gd">-        if height &lt;= 0:</span>
<span class="gi">+        if height == 0:</span>
             self._print([1])
             return [1]
<span class="gi">+        elif height &lt; 0:</span>
<span class="gi">+            return []</span>
 
<span class="gd">-        a = [0] + self.build(height - 1) + [0]</span>
<span class="gd">-        b = [a[i] + a[i + 1] for i in xrange(len(a) - 1)]</span>
<span class="gd">-        self._print(b)</span>
<span class="gd">-        return b  # return last line for testing purposes</span>
<span class="gi">+        prev_line = [0] + self.build(height - 1) + [0]</span>
<span class="gi">+        line = [prev_line[i] + prev_line[i + 1] for i in xrange(len(prev_line) - 1)]</span>
<span class="gi">+        self._print(line)</span>
<span class="gi">+        return line  # return last line for testing purposes</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pypascaltriangleconstantlists">
<h4>PyPascalTriangleConstantLists<a class="headerlink" href="#pypascaltriangleconstantlists" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">PyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleConstantLists</span><span class="p">(</span><span class="n">PyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PascalTriangleOriginalPlus`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Constant lists replaced with named constants</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">900</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">height</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span>
        <span class="k">elif</span> <span class="n">height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">EMPTY_LIST</span>

        <span class="n">prev_line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span>
        <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="n">prev_line</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">prev_line</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prev_line</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id2">
<h5>Diff<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/original_plus.py</span>
<span class="gi">+++ ../implementations/python/constant_lists.py</span>
<span class="gu">@@ -1,25 +1,24 @@</span>
 from .base import PyPascalTriangleBase
 
 
<span class="gd">-class PyPascalTriangleOriginalPlus(PyPascalTriangleBase):</span>
<span class="gi">+class PyPascalTriangleConstantLists(PyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PascalTriangleOriginal`.</span>
<span class="gi">+    Based on :py:class::`PascalTriangleOriginalPlus`.</span>
 
     Difference:
<span class="gd">-        - Better naming of local variables</span>
<span class="gd">-        - Fixed corner cases</span>
<span class="gi">+        - Constant lists replaced with named constants</span>
     &quot;&quot;&quot;
 
     max_height = 900
 
     def build(self, height):
         if height == 0:
<span class="gd">-            self._print([1])</span>
<span class="gd">-            return [1]</span>
<span class="gi">+            self._print(self.ONE_LIST)</span>
<span class="gi">+            return self.ONE_LIST</span>
         elif height &lt; 0:
<span class="gd">-            return []</span>
<span class="gi">+            return self.EMPTY_LIST</span>
 
<span class="gd">-        prev_line = [0] + self.build(height - 1) + [0]</span>
<span class="gi">+        prev_line = self.ZERO_LIST + self.build(height - 1) + self.ZERO_LIST</span>
         line = [prev_line[i] + prev_line[i + 1] for i in xrange(len(prev_line) - 1)]
         self._print(line)
         return line  # return last line for testing purposes
</pre></div>
</div>
</div>
</div>
<div class="section" id="pypascaltriangleconstanttuples">
<h4>PyPascalTriangleConstantTuples<a class="headerlink" href="#pypascaltriangleconstanttuples" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">PyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleConstantTuples</span><span class="p">(</span><span class="n">PyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PascalTriangleConstantLists`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Lists replaced with tuples</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">900</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">height</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ONE_TUPLE</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_TUPLE</span>
        <span class="k">elif</span> <span class="n">height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">EMPTY_TUPLE</span>

        <span class="n">prev_line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_TUPLE</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_TUPLE</span>
        <span class="n">line</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">prev_line</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">prev_line</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prev_line</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id3">
<h5>Diff<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/constant_lists.py</span>
<span class="gi">+++ ../implementations/python/constant_tuples.py</span>
<span class="gu">@@ -1,24 +1,24 @@</span>
 from .base import PyPascalTriangleBase
 
 
<span class="gd">-class PyPascalTriangleConstantLists(PyPascalTriangleBase):</span>
<span class="gi">+class PyPascalTriangleConstantTuples(PyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PascalTriangleOriginalPlus`.</span>
<span class="gi">+    Based on :py:class::`PascalTriangleConstantLists`.</span>
 
     Difference:
<span class="gd">-        - Constant lists replaced with named constants</span>
<span class="gi">+        - Lists replaced with tuples</span>
     &quot;&quot;&quot;
 
     max_height = 900
 
     def build(self, height):
         if height == 0:
<span class="gd">-            self._print(self.ONE_LIST)</span>
<span class="gd">-            return self.ONE_LIST</span>
<span class="gi">+            self._print(self.ONE_TUPLE)</span>
<span class="gi">+            return self.ONE_TUPLE</span>
         elif height &lt; 0:
<span class="gd">-            return self.EMPTY_LIST</span>
<span class="gi">+            return self.EMPTY_TUPLE</span>
 
<span class="gd">-        prev_line = self.ZERO_LIST + self.build(height - 1) + self.ZERO_LIST</span>
<span class="gd">-        line = [prev_line[i] + prev_line[i + 1] for i in xrange(len(prev_line) - 1)]</span>
<span class="gi">+        prev_line = self.ZERO_TUPLE + self.build(height - 1) + self.ZERO_TUPLE</span>
<span class="gi">+        line = tuple(prev_line[i] + prev_line[i + 1] for i in xrange(len(prev_line) - 1))</span>
         self._print(line)
         return line  # return last line for testing purposes
</pre></div>
</div>
</div>
</div>
<div class="section" id="pypascaltriangleiterators">
<h4>PyPascalTriangleIterators<a class="headerlink" href="#pypascaltriangleiterators" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">itertools</span>

<span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">PyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleIterators</span><span class="p">(</span><span class="n">PyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PascalTriangleConstantLists`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Iterators are used instead of lists where it is possible</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">900</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">height</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span>
        <span class="k">elif</span> <span class="n">height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">EMPTY_LIST</span>

        <span class="n">prev_line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">iterator</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span><span class="p">,</span> <span class="n">prev_line</span><span class="p">)</span>
        <span class="n">ahead_iterator</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="n">prev_line</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span><span class="p">)</span>
        <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">izip</span><span class="p">(</span><span class="n">iterator</span><span class="p">,</span> <span class="n">ahead_iterator</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id4">
<h5>Diff<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/constant_lists.py</span>
<span class="gi">+++ ../implementations/python/iterators.py</span>
<span class="gu">@@ -1,12 +1,14 @@</span>
<span class="gi">+import itertools</span>
<span class="gi">+</span>
 from .base import PyPascalTriangleBase
 
 
<span class="gd">-class PyPascalTriangleConstantLists(PyPascalTriangleBase):</span>
<span class="gi">+class PyPascalTriangleIterators(PyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PascalTriangleOriginalPlus`.</span>
<span class="gi">+    Based on :py:class::`PascalTriangleConstantLists`.</span>
 
     Difference:
<span class="gd">-        - Constant lists replaced with named constants</span>
<span class="gi">+        - Iterators are used instead of lists where it is possible</span>
     &quot;&quot;&quot;
 
     max_height = 900
<span class="gu">@@ -18,7 +20,9 @@</span>
         elif height &lt; 0:
             return self.EMPTY_LIST
 
<span class="gd">-        prev_line = self.ZERO_LIST + self.build(height - 1) + self.ZERO_LIST</span>
<span class="gd">-        line = [prev_line[i] + prev_line[i + 1] for i in xrange(len(prev_line) - 1)]</span>
<span class="gi">+        prev_line = self.build(height - 1)</span>
<span class="gi">+        iterator = itertools.chain(self.ZERO_LIST, prev_line)</span>
<span class="gi">+        ahead_iterator = itertools.chain(prev_line, self.ZERO_LIST)</span>
<span class="gi">+        line = [x + y for x, y in itertools.izip(iterator, ahead_iterator)]</span>
         self._print(line)
         return line  # return last line for testing purposes
</pre></div>
</div>
</div>
</div>
<div class="section" id="pypascaltrianglenonrecursive">
<h4>PyPascalTriangleNonRecursive<a class="headerlink" href="#pypascaltrianglenonrecursive" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">PyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleNonRecursive</span><span class="p">(</span><span class="n">PyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A non-recursive implementation of Pascal Triangle printing algorithm.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span> <span class="o">+</span> <span class="n">line</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
                <span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
</div>
<div class="section" id="pypascaltrianglenonrecursiveiterators">
<h4>PyPascalTriangleNonRecursiveIterators<a class="headerlink" href="#pypascaltrianglenonrecursiveiterators" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">itertools</span>

<span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">PyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleNonRecursiveIterators</span><span class="p">(</span><span class="n">PyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PascalTriangleNonRecursive`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - iterators are used instead of lists</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">EMPTY_LIST</span>

        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
            <span class="n">iterator</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
            <span class="n">ahead_iterator</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span><span class="p">)</span>
            <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">izip</span><span class="p">(</span><span class="n">iterator</span><span class="p">,</span> <span class="n">ahead_iterator</span><span class="p">)]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id5">
<h5>Diff<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/non_recursive.py</span>
<span class="gi">+++ ../implementations/python/non_recursive_iterators.py</span>
<span class="gu">@@ -1,17 +1,26 @@</span>
<span class="gi">+import itertools</span>
<span class="gi">+</span>
 from .base import PyPascalTriangleBase
 
 
<span class="gd">-class PyPascalTriangleNonRecursive(PyPascalTriangleBase):</span>
<span class="gi">+class PyPascalTriangleNonRecursiveIterators(PyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    A non-recursive implementation of Pascal Triangle printing algorithm.</span>
<span class="gi">+    Based on :py:class::`PascalTriangleNonRecursive`.</span>
<span class="gi">+</span>
<span class="gi">+    Difference:</span>
<span class="gi">+        - iterators are used instead of lists</span>
     &quot;&quot;&quot;
 
     def build(self, height):
<span class="gd">-        line = []</span>
<span class="gd">-        for x in xrange(height + 1):</span>
<span class="gd">-            line = self.ONE_LIST + line</span>
<span class="gd">-            for i in xrange(1, x):</span>
<span class="gd">-                line[i] += line[i + 1]</span>
<span class="gi">+        if height &lt; 0:</span>
<span class="gi">+            return self.EMPTY_LIST</span>
<span class="gi">+</span>
<span class="gi">+        line = self.ONE_LIST</span>
<span class="gi">+        self._print(line)</span>
<span class="gi">+        for _ in xrange(height):</span>
<span class="gi">+            iterator = itertools.chain(self.ZERO_LIST, line)</span>
<span class="gi">+            ahead_iterator = itertools.chain(line, self.ZERO_LIST)</span>
<span class="gi">+            line = [x + y for x, y in itertools.izip(iterator, ahead_iterator)]</span>
             self._print(line)
 
         return line  # return last line for testing purposes
</pre></div>
</div>
</div>
</div>
<div class="section" id="pypascaltrianglenonrecursiveclike">
<h4>PyPascalTriangleNonRecursiveCLike<a class="headerlink" href="#pypascaltrianglenonrecursiveclike" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">PyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleNonRecursiveCLike</span><span class="p">(</span><span class="n">PyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PascalTriangleNonRecursive`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - All required memory is allocated at once</span>
<span class="sd">        - List concatenations are replaced with value assignment by index</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">height</span>
        <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">size</span> <span class="o">&lt;=</span> <span class="n">height</span><span class="p">:</span>
            <span class="n">line</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">i</span>
                <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">print_line</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">print_line</span><span class="p">)</span>
            <span class="n">start</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">size</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id6">
<h5>Diff<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/non_recursive.py</span>
<span class="gi">+++ ../implementations/python/non_recursive_c_like.py</span>
<span class="gu">@@ -1,17 +1,29 @@</span>
 from .base import PyPascalTriangleBase
 
 
<span class="gd">-class PyPascalTriangleNonRecursive(PyPascalTriangleBase):</span>
<span class="gi">+class PyPascalTriangleNonRecursiveCLike(PyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    A non-recursive implementation of Pascal Triangle printing algorithm.</span>
<span class="gi">+    Based on :py:class::`PascalTriangleNonRecursive`.</span>
<span class="gi">+</span>
<span class="gi">+    Difference:</span>
<span class="gi">+        - All required memory is allocated at once</span>
<span class="gi">+        - List concatenations are replaced with value assignment by index</span>
     &quot;&quot;&quot;
 
     def build(self, height):
<span class="gd">-        line = []</span>
<span class="gd">-        for x in xrange(height + 1):</span>
<span class="gd">-            line = self.ONE_LIST + line</span>
<span class="gd">-            for i in xrange(1, x):</span>
<span class="gd">-                line[i] += line[i + 1]</span>
<span class="gd">-            self._print(line)</span>
<span class="gi">+        line = self.ZERO_LIST * (height + 1)</span>
<span class="gi">+        start = height</span>
<span class="gi">+        size = 0</span>
<span class="gi">+        while size &lt;= height:</span>
<span class="gi">+            line[start] = 1</span>
<span class="gi">+            i = 1</span>
<span class="gi">+            while i &lt; size:</span>
<span class="gi">+                index = start + i</span>
<span class="gi">+                line[index] += line[index + 1]</span>
<span class="gi">+                i += 1</span>
<span class="gi">+            print_line = line[start:start + size + 1]</span>
<span class="gi">+            self._print(print_line)</span>
<span class="gi">+            start -= 1</span>
<span class="gi">+            size += 1</span>
 
         return line  # return last line for testing purposes
</pre></div>
</div>
</div>
</div>
<div class="section" id="pypascaltrianglenonrecursiveclikeimproved">
<h4>PyPascalTriangleNonRecursiveCLikeImproved<a class="headerlink" href="#pypascaltrianglenonrecursiveclikeimproved" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">PyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleNonRecursiveCLikeImproved</span><span class="p">(</span><span class="n">PyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PascalTriangleNonRecursiveCLike`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Removed some unneeded computations</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">height</span>
        <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">size</span> <span class="o">&lt;=</span> <span class="n">height</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">:</span>
                <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">print_line</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">print_line</span><span class="p">)</span>
            <span class="n">start</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">size</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id7">
<h5>Diff<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/non_recursive_c_like.py</span>
<span class="gi">+++ ../implementations/python/non_recursive_c_like_improved.py</span>
<span class="gu">@@ -1,26 +1,23 @@</span>
 from .base import PyPascalTriangleBase
 
 
<span class="gd">-class PyPascalTriangleNonRecursiveCLike(PyPascalTriangleBase):</span>
<span class="gi">+class PyPascalTriangleNonRecursiveCLikeImproved(PyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PascalTriangleNonRecursive`.</span>
<span class="gi">+    Based on :py:class::`PascalTriangleNonRecursiveCLike`.</span>
 
     Difference:
<span class="gd">-        - All required memory is allocated at once</span>
<span class="gd">-        - List concatenations are replaced with value assignment by index</span>
<span class="gi">+        - Removed some unneeded computations</span>
     &quot;&quot;&quot;
 
     def build(self, height):
<span class="gd">-        line = self.ZERO_LIST * (height + 1)</span>
<span class="gi">+        line = self.ONE_LIST * (height + 1)</span>
         start = height
         size = 0
         while size &lt;= height:
<span class="gd">-            line[start] = 1</span>
<span class="gd">-            i = 1</span>
<span class="gd">-            while i &lt; size:</span>
<span class="gd">-                index = start + i</span>
<span class="gi">+            index = start + 1</span>
<span class="gi">+            while index &lt; height:</span>
                 line[index] += line[index + 1]
<span class="gd">-                i += 1</span>
<span class="gi">+                index += 1</span>
             print_line = line[start:start + size + 1]
             self._print(print_line)
             start -= 1
</pre></div>
</div>
</div>
</div>
<div class="section" id="pypascaltrianglenonrecursivelessclike">
<h4>PyPascalTriangleNonRecursiveLessCLike<a class="headerlink" href="#pypascaltrianglenonrecursivelessclike" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">PyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleNonRecursiveLessCLike</span><span class="p">(</span><span class="n">PyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PascalTriangleNonRecursiveCLike`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - xrange objects are used instead of while-loops</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">height</span>
        <span class="k">for</span> <span class="n">size</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
                <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">print_line</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">start</span><span class="p">:]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">print_line</span><span class="p">)</span>
            <span class="n">start</span> <span class="o">-=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id8">
<h5>Diff<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/non_recursive_c_like.py</span>
<span class="gi">+++ ../implementations/python/non_recursive_less_c_like.py</span>
<span class="gu">@@ -1,29 +1,22 @@</span>
 from .base import PyPascalTriangleBase
 
 
<span class="gd">-class PyPascalTriangleNonRecursiveCLike(PyPascalTriangleBase):</span>
<span class="gi">+class PyPascalTriangleNonRecursiveLessCLike(PyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PascalTriangleNonRecursive`.</span>
<span class="gi">+    Based on :py:class::`PascalTriangleNonRecursiveCLike`.</span>
 
     Difference:
<span class="gd">-        - All required memory is allocated at once</span>
<span class="gd">-        - List concatenations are replaced with value assignment by index</span>
<span class="gi">+        - xrange objects are used instead of while-loops</span>
     &quot;&quot;&quot;
 
     def build(self, height):
<span class="gd">-        line = self.ZERO_LIST * (height + 1)</span>
<span class="gi">+        line = self.ONE_LIST * (height + 1)</span>
         start = height
<span class="gd">-        size = 0</span>
<span class="gd">-        while size &lt;= height:</span>
<span class="gd">-            line[start] = 1</span>
<span class="gd">-            i = 1</span>
<span class="gd">-            while i &lt; size:</span>
<span class="gd">-                index = start + i</span>
<span class="gi">+        for size in xrange(height + 1):</span>
<span class="gi">+            for index in xrange(start + 1, height):</span>
                 line[index] += line[index + 1]
<span class="gd">-                i += 1</span>
<span class="gd">-            print_line = line[start:start + size + 1]</span>
<span class="gi">+            print_line = line[start:]</span>
             self._print(print_line)
             start -= 1
<span class="gd">-            size += 1</span>
 
         return line  # return last line for testing purposes
</pre></div>
</div>
</div>
</div>
<div class="section" id="pypascaltrianglenonrecursivearray">
<h4>PyPascalTriangleNonRecursiveArray<a class="headerlink" href="#pypascaltrianglenonrecursivearray" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">from</span> <span class="nn">array</span> <span class="kn">import</span> <span class="n">array</span>

<span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">PyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">PyPascalTriangleNonRecursiveArray</span><span class="p">(</span><span class="n">PyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PascalTriangleNonRecursiveLessCLike`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - array object is used instead of list</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">34</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="n">itertools</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">height</span>
        <span class="k">for</span> <span class="n">size</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
                <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">print_line</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">start</span><span class="p">:]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">print_line</span><span class="p">)</span>
            <span class="n">start</span> <span class="o">-=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id9">
<h5>Diff<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/non_recursive_less_c_like.py</span>
<span class="gi">+++ ../implementations/python/non_recursive_array.py</span>
<span class="gu">@@ -1,16 +1,21 @@</span>
<span class="gi">+import itertools</span>
<span class="gi">+from array import array</span>
<span class="gi">+</span>
 from .base import PyPascalTriangleBase
 
 
<span class="gd">-class PyPascalTriangleNonRecursiveLessCLike(PyPascalTriangleBase):</span>
<span class="gi">+class PyPascalTriangleNonRecursiveArray(PyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PascalTriangleNonRecursiveCLike`.</span>
<span class="gi">+    Based on :py:class::`PascalTriangleNonRecursiveLessCLike`.</span>
 
     Difference:
<span class="gd">-        - xrange objects are used instead of while-loops</span>
<span class="gi">+        - array object is used instead of list</span>
     &quot;&quot;&quot;
 
<span class="gi">+    max_height = 34</span>
<span class="gi">+</span>
     def build(self, height):
<span class="gd">-        line = self.ONE_LIST * (height + 1)</span>
<span class="gi">+        line = array(&#39;I&#39;, itertools.repeat(1, height + 1))</span>
         start = height
         for size in xrange(height + 1):
             for index in xrange(start + 1, height):
</pre></div>
</div>
</div>
</div>
<div class="section" id="cypascaltrianglebase">
<h4>CyPascalTriangleBase<a class="headerlink" href="#cypascaltrianglebase" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pascal_triangle.implementations.base</span> <span class="kn">import</span> <span class="n">PascalTriangleBase</span>


<span class="k">class</span> <span class="nc">CyPascalTriangleBase</span><span class="p">(</span><span class="n">PascalTriangleBase</span><span class="p">):</span>

    <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;Cython&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="cypascaltriangleconstantlists">
<h4>CyPascalTriangleConstantLists<a class="headerlink" href="#cypascaltriangleconstantlists" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">CyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">CyPascalTriangleConstantLists</span><span class="p">(</span><span class="n">CyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PascalTriangleConstantLists`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Compiled with Cython</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">900</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">height</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span>
        <span class="k">elif</span> <span class="n">height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">EMPTY_LIST</span>

        <span class="n">prev_line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span>
        <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="n">prev_line</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">prev_line</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prev_line</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id10">
<h5>Diff<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/constant_lists.py</span>
<span class="gi">+++ ../implementations/cython/constant_lists.pyx</span>
<span class="gu">@@ -1,12 +1,12 @@</span>
<span class="gd">-from .base import PyPascalTriangleBase</span>
<span class="gi">+from .base import CyPascalTriangleBase</span>
 
 
<span class="gd">-class PyPascalTriangleConstantLists(PyPascalTriangleBase):</span>
<span class="gi">+class CyPascalTriangleConstantLists(CyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PascalTriangleOriginalPlus`.</span>
<span class="gi">+    Based on :py:class::`PascalTriangleConstantLists`.</span>
 
     Difference:
<span class="gd">-        - Constant lists replaced with named constants</span>
<span class="gi">+        - Compiled with Cython</span>
     &quot;&quot;&quot;
 
     max_height = 900
</pre></div>
</div>
</div>
</div>
<div class="section" id="cypascaltriangleiterators">
<h4>CyPascalTriangleIterators<a class="headerlink" href="#cypascaltriangleiterators" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">itertools</span>

<span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">CyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">CyPascalTriangleIterators</span><span class="p">(</span><span class="n">CyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PascalTriangleIterators`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Compiled with Cython</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">900</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">height</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span>
        <span class="k">elif</span> <span class="n">height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">EMPTY_LIST</span>

        <span class="n">prev_line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">iterator</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span><span class="p">,</span> <span class="n">prev_line</span><span class="p">)</span>
        <span class="n">ahead_iterator</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="n">prev_line</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span><span class="p">)</span>
        <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">izip</span><span class="p">(</span><span class="n">iterator</span><span class="p">,</span> <span class="n">ahead_iterator</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id11">
<h5>Diff<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/iterators.py</span>
<span class="gi">+++ ../implementations/cython/iterators.pyx</span>
<span class="gu">@@ -1,14 +1,14 @@</span>
 import itertools
 
<span class="gd">-from .base import PyPascalTriangleBase</span>
<span class="gi">+from .base import CyPascalTriangleBase</span>
 
 
<span class="gd">-class PyPascalTriangleIterators(PyPascalTriangleBase):</span>
<span class="gi">+class CyPascalTriangleIterators(CyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PascalTriangleConstantLists`.</span>
<span class="gi">+    Based on :py:class::`PascalTriangleIterators`.</span>
 
     Difference:
<span class="gd">-        - Iterators are used instead of lists where it is possible</span>
<span class="gi">+        - Compiled with Cython</span>
     &quot;&quot;&quot;
 
     max_height = 900
</pre></div>
</div>
</div>
</div>
<div class="section" id="cypascaltrianglenonrecursive">
<h4>CyPascalTriangleNonRecursive<a class="headerlink" href="#cypascaltrianglenonrecursive" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">CyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">CyPascalTriangleNonRecursive</span><span class="p">(</span><span class="n">CyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PyPascalTriangleNonRecursive`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Compiled with Cython</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span> <span class="o">+</span> <span class="n">line</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
                <span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id12">
<h5>Diff<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/non_recursive.py</span>
<span class="gi">+++ ../implementations/cython/non_recursive.pyx</span>
<span class="gu">@@ -1,9 +1,12 @@</span>
<span class="gd">-from .base import PyPascalTriangleBase</span>
<span class="gi">+from .base import CyPascalTriangleBase</span>
 
 
<span class="gd">-class PyPascalTriangleNonRecursive(PyPascalTriangleBase):</span>
<span class="gi">+class CyPascalTriangleNonRecursive(CyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    A non-recursive implementation of Pascal Triangle printing algorithm.</span>
<span class="gi">+    Based on :py:class::`PyPascalTriangleNonRecursive`.</span>
<span class="gi">+</span>
<span class="gi">+    Difference:</span>
<span class="gi">+        - Compiled with Cython</span>
     &quot;&quot;&quot;
 
     def build(self, height):
</pre></div>
</div>
</div>
</div>
<div class="section" id="cypascaltrianglenonrecursiveiterators">
<h4>CyPascalTriangleNonRecursiveIterators<a class="headerlink" href="#cypascaltrianglenonrecursiveiterators" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">itertools</span>

<span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">CyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">CyPascalTriangleNonRecursiveIterators</span><span class="p">(</span><span class="n">CyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PyPascalTriangleNonRecursiveIterators`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Compiled with Cython</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">EMPTY_LIST</span>

        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
            <span class="n">iterator</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
            <span class="n">ahead_iterator</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZERO_LIST</span><span class="p">)</span>
            <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">izip</span><span class="p">(</span><span class="n">iterator</span><span class="p">,</span> <span class="n">ahead_iterator</span><span class="p">)]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id13">
<h5>Diff<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/non_recursive_iterators.py</span>
<span class="gi">+++ ../implementations/cython/non_recursive_iterators.pyx</span>
<span class="gu">@@ -1,14 +1,14 @@</span>
 import itertools
 
<span class="gd">-from .base import PyPascalTriangleBase</span>
<span class="gi">+from .base import CyPascalTriangleBase</span>
 
 
<span class="gd">-class PyPascalTriangleNonRecursiveIterators(PyPascalTriangleBase):</span>
<span class="gi">+class CyPascalTriangleNonRecursiveIterators(CyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PascalTriangleNonRecursive`.</span>
<span class="gi">+    Based on :py:class::`PyPascalTriangleNonRecursiveIterators`.</span>
 
     Difference:
<span class="gd">-        - iterators are used instead of lists</span>
<span class="gi">+        - Compiled with Cython</span>
     &quot;&quot;&quot;
 
     def build(self, height):
</pre></div>
</div>
</div>
</div>
<div class="section" id="cypascaltrianglenonrecursiveclikeimproved">
<h4>CyPascalTriangleNonRecursiveCLikeImproved<a class="headerlink" href="#cypascaltrianglenonrecursiveclikeimproved" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">CyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">CyPascalTriangleNonRecursiveCLikeImproved</span><span class="p">(</span><span class="n">CyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PyPascalTriangleNonRecursiveCLikeImproved`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Compiled with Cython</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">height</span>
        <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">size</span> <span class="o">&lt;=</span> <span class="n">height</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">:</span>
                <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">print_line</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">print_line</span><span class="p">)</span>
            <span class="n">start</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">size</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id14">
<h5>Diff<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/non_recursive_c_like_improved.py</span>
<span class="gi">+++ ../implementations/cython/non_recursive_c_like_improved.pyx</span>
<span class="gu">@@ -1,12 +1,12 @@</span>
<span class="gd">-from .base import PyPascalTriangleBase</span>
<span class="gi">+from .base import CyPascalTriangleBase</span>
 
 
<span class="gd">-class PyPascalTriangleNonRecursiveCLikeImproved(PyPascalTriangleBase):</span>
<span class="gi">+class CyPascalTriangleNonRecursiveCLikeImproved(CyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PascalTriangleNonRecursiveCLike`.</span>
<span class="gi">+    Based on :py:class::`PyPascalTriangleNonRecursiveCLikeImproved`.</span>
 
     Difference:
<span class="gd">-        - Removed some unneeded computations</span>
<span class="gi">+        - Compiled with Cython</span>
     &quot;&quot;&quot;
 
     def build(self, height):
</pre></div>
</div>
</div>
</div>
<div class="section" id="cypascaltrianglenonrecursiveclikemoreimproved">
<h4>CyPascalTriangleNonRecursiveCLikeMoreImproved<a class="headerlink" href="#cypascaltrianglenonrecursiveclikemoreimproved" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">CyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">CyPascalTriangleNonRecursiveCLikeMoreImproved</span><span class="p">(</span><span class="n">CyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`CyPascalTriangleNonRecursiveCLikeImproved`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - List slicing replaced with character by character output</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">height</span>
        <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">size</span> <span class="o">&lt;=</span> <span class="n">height</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">:</span>
                <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">i</span> <span class="o">=</span> <span class="n">start</span>
            <span class="n">finish</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">size</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">finish</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="k">print</span>

            <span class="n">start</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">size</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id15">
<h5>Diff<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/cython/non_recursive_c_like_improved.pyx</span>
<span class="gi">+++ ../implementations/cython/non_recursive_c_like_more_improved.pyx</span>
<span class="gu">@@ -1,15 +1,17 @@</span>
<span class="gi">+import sys</span>
<span class="gi">+</span>
 from .base import CyPascalTriangleBase
 
 
<span class="gd">-class CyPascalTriangleNonRecursiveCLikeImproved(CyPascalTriangleBase):</span>
<span class="gi">+class CyPascalTriangleNonRecursiveCLikeMoreImproved(CyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PyPascalTriangleNonRecursiveCLikeImproved`.</span>
<span class="gi">+    Based on :py:class::`CyPascalTriangleNonRecursiveCLikeImproved`.</span>
 
     Difference:
<span class="gd">-        - Compiled with Cython</span>
<span class="gi">+        - List slicing replaced with character by character output</span>
     &quot;&quot;&quot;
 
<span class="gd">-    def build(self, height):</span>
<span class="gi">+    def build(self, height, verbose=False):</span>
         line = self.ONE_LIST * (height + 1)
         start = height
         size = 0
<span class="gu">@@ -18,8 +20,16 @@</span>
             while index &lt; height:
                 line[index] += line[index + 1]
                 index += 1
<span class="gd">-            print_line = line[start:start + size + 1]</span>
<span class="gd">-            self._print(print_line)</span>
<span class="gi">+</span>
<span class="gi">+            i = start</span>
<span class="gi">+            finish = start + size + 1</span>
<span class="gi">+            while i &lt; finish:</span>
<span class="gi">+                if verbose:</span>
<span class="gi">+                    sys.stdout.write(str(line[i]) + &quot; &quot;)</span>
<span class="gi">+                i += 1</span>
<span class="gi">+            if verbose:</span>
<span class="gi">+                print</span>
<span class="gi">+</span>
             start -= 1
             size += 1
 
</pre></div>
</div>
</div>
</div>
<div class="section" id="cypascaltrianglenonrecursivelessclike">
<h4>CyPascalTriangleNonRecursiveLessCLike<a class="headerlink" href="#cypascaltrianglenonrecursivelessclike" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">CyPascalTriangleBase</span>


<span class="k">class</span> <span class="nc">CyPascalTriangleNonRecursiveLessCLike</span><span class="p">(</span><span class="n">CyPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`PyPascalTriangleNonRecursiveLessCLike`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Compiled with Cython</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ONE_LIST</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">height</span>
        <span class="k">for</span> <span class="n">size</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
                <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">print_line</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">start</span><span class="p">:]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">print_line</span><span class="p">)</span>
            <span class="n">start</span> <span class="o">-=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">line</span>  <span class="c1"># return last line for testing purposes</span>
</pre></div>
</div>
<div class="section" id="id16">
<h5>Diff<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/non_recursive_less_c_like.py</span>
<span class="gi">+++ ../implementations/cython/non_recursive_less_c_like.pyx</span>
<span class="gu">@@ -1,12 +1,12 @@</span>
<span class="gd">-from .base import PyPascalTriangleBase</span>
<span class="gi">+from .base import CyPascalTriangleBase</span>
 
 
<span class="gd">-class PyPascalTriangleNonRecursiveLessCLike(PyPascalTriangleBase):</span>
<span class="gi">+class CyPascalTriangleNonRecursiveLessCLike(CyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PascalTriangleNonRecursiveCLike`.</span>
<span class="gi">+    Based on :py:class::`PyPascalTriangleNonRecursiveLessCLike`.</span>
 
     Difference:
<span class="gd">-        - xrange objects are used instead of while-loops</span>
<span class="gi">+        - Compiled with Cython</span>
     &quot;&quot;&quot;
 
     def build(self, height):
</pre></div>
</div>
</div>
</div>
<div class="section" id="cypascaltrianglenonrecursivectypes">
<h4>CyPascalTriangleNonRecursiveCTypes<a class="headerlink" href="#cypascaltrianglenonrecursivectypes" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre>import sys

import itertools
from array import array
from cpython cimport array as c_array

from .base import CyPascalTriangleBase


class CyPascalTriangleNonRecursiveCTypes(CyPascalTriangleBase):
    &quot;&quot;&quot;
    Based on :py:class::`PyPascalTriangleNonRecursiveArray`.

    Difference:
        - Compiled with Cython
        - C type are used instead of Python types
    &quot;&quot;&quot;

    max_height = 34

    def build(self, height, verbose=False):
        cdef c_array.array line = array(&#39;I&#39;, itertools.repeat(1, height + 1))
        cdef int start = height
        cdef int size = 0
        cdef int index
        cdef int i
        cdef int finish
        while size &lt;= height:
            index = start + 1
            while index &lt; height:
                line[index] += line[index + 1]
                index += 1

            i = start
            finish = start + size + 1
            while i &lt; finish:
                if verbose:
                    sys.stdout.write(str(line[i]) + &#39; &#39;)
                i += 1
            if verbose:
                print

            start -= 1
            size += 1
        return line  # return last line for testing purposes
</pre></div>
</div>
<div class="section" id="id17">
<h5>Diff<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/python/non_recursive_array.py</span>
<span class="gi">+++ ../implementations/cython/c_types.pyx</span>
<span class="gu">@@ -1,27 +1,45 @@</span>
<span class="gi">+import sys</span>
<span class="gi">+</span>
 import itertools
 from array import array
<span class="gi">+from cpython cimport array as c_array</span>
 
<span class="gd">-from .base import PyPascalTriangleBase</span>
<span class="gi">+from .base import CyPascalTriangleBase</span>
 
 
<span class="gd">-class PyPascalTriangleNonRecursiveArray(PyPascalTriangleBase):</span>
<span class="gi">+class CyPascalTriangleNonRecursiveCTypes(CyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PascalTriangleNonRecursiveLessCLike`.</span>
<span class="gi">+    Based on :py:class::`PyPascalTriangleNonRecursiveArray`.</span>
 
     Difference:
<span class="gd">-        - array object is used instead of list</span>
<span class="gi">+        - Compiled with Cython</span>
<span class="gi">+        - C type are used instead of Python types</span>
     &quot;&quot;&quot;
 
     max_height = 34
 
<span class="gd">-    def build(self, height):</span>
<span class="gd">-        line = array(&#39;I&#39;, itertools.repeat(1, height + 1))</span>
<span class="gd">-        start = height</span>
<span class="gd">-        for size in xrange(height + 1):</span>
<span class="gd">-            for index in xrange(start + 1, height):</span>
<span class="gi">+    def build(self, height, verbose=False):</span>
<span class="gi">+        cdef c_array.array line = array(&#39;I&#39;, itertools.repeat(1, height + 1))</span>
<span class="gi">+        cdef int start = height</span>
<span class="gi">+        cdef int size = 0</span>
<span class="gi">+        cdef int index</span>
<span class="gi">+        cdef int i</span>
<span class="gi">+        cdef int finish</span>
<span class="gi">+        while size &lt;= height:</span>
<span class="gi">+            index = start + 1</span>
<span class="gi">+            while index &lt; height:</span>
                 line[index] += line[index + 1]
<span class="gd">-            print_line = line[start:]</span>
<span class="gd">-            self._print(print_line)</span>
<span class="gi">+                index += 1</span>
<span class="gi">+</span>
<span class="gi">+            i = start</span>
<span class="gi">+            finish = start + size + 1</span>
<span class="gi">+            while i &lt; finish:</span>
<span class="gi">+                if verbose:</span>
<span class="gi">+                    sys.stdout.write(str(line[i]) + &#39; &#39;)</span>
<span class="gi">+                i += 1</span>
<span class="gi">+            if verbose:</span>
<span class="gi">+                print</span>
<span class="gi">+</span>
             start -= 1
<span class="gd">-</span>
<span class="gi">+            size += 1</span>
         return line  # return last line for testing purposes
</pre></div>
</div>
</div>
</div>
<div class="section" id="cypascaltrianglenonrecursivectypesulong">
<h4>CyPascalTriangleNonRecursiveCTypesULong<a class="headerlink" href="#cypascaltrianglenonrecursivectypesulong" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre>import sys

import itertools
from array import array
from cpython cimport array as c_array

from .base import CyPascalTriangleBase


class CyPascalTriangleNonRecursiveCTypesULong(CyPascalTriangleBase):
    &quot;&quot;&quot;
    Based on :py:class::`CyPascalTriangleNonRecursiveCTypes`.

    Difference:
        - 64-bit integers are used to store values instead of 32-bit integers
    &quot;&quot;&quot;

    max_height = 67

    def build(self, height, verbose=False):
        cdef c_array.array line = array(&#39;L&#39;, itertools.repeat(1, height + 1))
        cdef int start = height
        cdef int size = 0
        cdef int index
        cdef int i
        cdef int finish
        while size &lt;= height:
            index = start + 1
            while index &lt; height:
                line[index] += line[index + 1]
                index += 1

            i = start
            finish = start + size + 1
            while i &lt; finish:
                if verbose:
                    sys.stdout.write(str(line[i]) + &#39; &#39;)
                i += 1
            if verbose:
                print

            start -= 1
            size += 1
        return line  # return last line for testing purposes
</pre></div>
</div>
<div class="section" id="id18">
<h5>Diff<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/cython/c_types.pyx</span>
<span class="gi">+++ ../implementations/cython/c_types_ulong.pyx</span>
<span class="gu">@@ -7,19 +7,18 @@</span>
 from .base import CyPascalTriangleBase
 
 
<span class="gd">-class CyPascalTriangleNonRecursiveCTypes(CyPascalTriangleBase):</span>
<span class="gi">+class CyPascalTriangleNonRecursiveCTypesULong(CyPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`PyPascalTriangleNonRecursiveArray`.</span>
<span class="gi">+    Based on :py:class::`CyPascalTriangleNonRecursiveCTypes`.</span>
 
     Difference:
<span class="gd">-        - Compiled with Cython</span>
<span class="gd">-        - C type are used instead of Python types</span>
<span class="gi">+        - 64-bit integers are used to store values instead of 32-bit integers</span>
     &quot;&quot;&quot;
 
<span class="gd">-    max_height = 34</span>
<span class="gi">+    max_height = 67</span>
 
     def build(self, height, verbose=False):
<span class="gd">-        cdef c_array.array line = array(&#39;I&#39;, itertools.repeat(1, height + 1))</span>
<span class="gi">+        cdef c_array.array line = array(&#39;L&#39;, itertools.repeat(1, height + 1))</span>
         cdef int start = height
         cdef int size = 0
         cdef int index
</pre></div>
</div>
</div>
</div>
<div class="section" id="cpascaltriangleinitial">
<h4>CPascalTriangleInitial<a class="headerlink" href="#cpascaltriangleinitial" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">CPascalTriangleBase</span>
<span class="kn">from</span> <span class="nn">.cinitial</span> <span class="kn">import</span> <span class="n">c_pascal_triangle_initial</span>


<span class="k">class</span> <span class="nc">CPascalTriangleInitial</span><span class="p">(</span><span class="n">CPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`CyPascalTriangleNonRecursiveCTypes`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - C implementation</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">34</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">c_pascal_triangle_initial</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">return_list</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include</span> <span class="cpf">&lt;Python.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="c1">// TODO LOW: Allocate memory on heap using malloc() instead of stack</span>
<span class="cp">#define MAX_HEIGHT_UINT 34</span>


<span class="k">static</span> <span class="n">PyObject</span><span class="o">*</span> <span class="nf">c_pascal_triangle_initial</span><span class="p">(</span><span class="n">PyObject</span><span class="o">*</span> <span class="n">self</span><span class="p">,</span> <span class="n">PyObject</span><span class="o">*</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">height</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">PyArg_ParseTuple</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s">&quot;i|ii&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">height</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">verbose</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">return_list</span><span class="p">))</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">line</span><span class="p">[</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>

    <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="n">height</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">index</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="n">height</span> <span class="o">&gt;</span> <span class="n">MAX_HEIGHT_UINT</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PyErr_Format</span><span class="p">(</span><span class="n">PyExc_ValueError</span><span class="p">,</span> <span class="s">&quot;Unable to build Pascal&#39;s Triangle higher than %d&quot;</span><span class="p">,</span> <span class="n">MAX_HEIGHT_UINT</span><span class="p">);</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">size</span> <span class="o">&lt;=</span> <span class="n">height</span><span class="p">;</span> <span class="n">size</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">line</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">;</span> <span class="n">index</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">size</span><span class="p">;</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">;</span> <span class="n">index</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%u &quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

        <span class="n">start</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="n">return_list</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PyObject</span><span class="o">*</span> <span class="n">py_line</span> <span class="o">=</span> <span class="n">PyList_New</span><span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">height</span><span class="p">;</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">index</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">PyList_SetItem</span><span class="p">(</span><span class="n">py_line</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">PyInt_FromLong</span><span class="p">((</span><span class="kt">long</span><span class="p">)</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]));</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">py_line</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">Py_INCREF</span><span class="p">(</span><span class="n">Py_None</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">Py_None</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="k">static</span> <span class="n">PyMethodDef</span> <span class="n">cpascal_triangle_methods</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span><span class="s">&quot;c_pascal_triangle_initial&quot;</span><span class="p">,</span> <span class="n">c_pascal_triangle_initial</span><span class="p">,</span> <span class="n">METH_VARARGS</span><span class="p">},</span>
    <span class="p">{</span><span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">initcinitial</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">Py_InitModule</span><span class="p">(</span><span class="s">&quot;cinitial&quot;</span><span class="p">,</span> <span class="n">cpascal_triangle_methods</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cpascaltriangleulong">
<h4>CPascalTriangleULong<a class="headerlink" href="#cpascaltriangleulong" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">CPascalTriangleBase</span>
<span class="kn">from</span> <span class="nn">.culong</span> <span class="kn">import</span> <span class="n">c_pascal_triangle_ulong</span>


<span class="k">class</span> <span class="nc">CPascalTriangleULong</span><span class="p">(</span><span class="n">CPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`CPascalTriangleInitial`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Unsigned long is used instead of unsigned int</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">67</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">c_pascal_triangle_ulong</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">return_list</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include</span> <span class="cpf">&lt;Python.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="c1">// TODO LOW: Allocate memory on heap using malloc() instead of stack</span>

<span class="cp">#define MAX_HEIGHT_ULONG 67</span>


<span class="k">static</span> <span class="n">PyObject</span><span class="o">*</span> <span class="nf">c_pascal_triangle_ulong</span><span class="p">(</span><span class="n">PyObject</span><span class="o">*</span> <span class="n">self</span><span class="p">,</span> <span class="n">PyObject</span><span class="o">*</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">height</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">PyArg_ParseTuple</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s">&quot;i|ii&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">height</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">verbose</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">return_list</span><span class="p">))</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">line</span><span class="p">[</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>

    <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="n">height</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">index</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="n">height</span> <span class="o">&gt;</span> <span class="n">MAX_HEIGHT_ULONG</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PyErr_Format</span><span class="p">(</span><span class="n">PyExc_ValueError</span><span class="p">,</span> <span class="s">&quot;Unable to build Pascal&#39;s Triangle higher than %d&quot;</span><span class="p">,</span> <span class="n">MAX_HEIGHT_ULONG</span><span class="p">);</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">size</span> <span class="o">&lt;=</span> <span class="n">height</span><span class="p">;</span> <span class="n">size</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">line</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">;</span> <span class="n">index</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">size</span><span class="p">;</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">;</span> <span class="n">index</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%lu &quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

        <span class="n">start</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="n">return_list</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PyObject</span><span class="o">*</span> <span class="n">py_line</span> <span class="o">=</span> <span class="n">PyList_New</span><span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">height</span><span class="p">;</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">index</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">PyList_SetItem</span><span class="p">(</span><span class="n">py_line</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">PyLong_FromUnsignedLong</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]));</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">py_line</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">Py_INCREF</span><span class="p">(</span><span class="n">Py_None</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">Py_None</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="k">static</span> <span class="n">PyMethodDef</span> <span class="n">cpascal_triangle_methods</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span><span class="s">&quot;c_pascal_triangle_ulong&quot;</span><span class="p">,</span> <span class="n">c_pascal_triangle_ulong</span><span class="p">,</span> <span class="n">METH_VARARGS</span><span class="p">},</span>
    <span class="p">{</span><span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">initculong</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">Py_InitModule</span><span class="p">(</span><span class="s">&quot;culong&quot;</span><span class="p">,</span> <span class="n">cpascal_triangle_methods</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="id19">
<h5>Diff<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/cextension/initial.py</span>
<span class="gi">+++ ../implementations/cextension/ulong.py</span>
<span class="gu">@@ -1,16 +1,16 @@</span>
 from .base import CPascalTriangleBase
<span class="gd">-from .cinitial import c_pascal_triangle_initial</span>
<span class="gi">+from .culong import c_pascal_triangle_ulong</span>
 
 
<span class="gd">-class CPascalTriangleInitial(CPascalTriangleBase):</span>
<span class="gi">+class CPascalTriangleULong(CPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`CyPascalTriangleNonRecursiveCTypes`.</span>
<span class="gi">+    Based on :py:class::`CPascalTriangleInitial`.</span>
 
     Difference:
<span class="gd">-        - C implementation</span>
<span class="gi">+        - Unsigned long is used instead of unsigned int</span>
     &quot;&quot;&quot;
 
<span class="gd">-    max_height = 34</span>
<span class="gi">+    max_height = 67</span>
 
     def build(self, height):
<span class="gd">-        return c_pascal_triangle_initial(height, 0, self.return_list)</span>
<span class="gi">+        return c_pascal_triangle_ulong(height, 0, self.return_list)</span>
</pre></div>
</div>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/cextension/cinitial.c</span>
<span class="gi">+++ ../implementations/cextension/culong.c</span>
<span class="gu">@@ -2,21 +2,22 @@</span>
 #include &lt;stdio.h&gt;
 
 // TODO LOW: Allocate memory on heap using malloc() instead of stack
<span class="gd">-#define MAX_HEIGHT_UINT 34</span>
<span class="gi">+</span>
<span class="gi">+#define MAX_HEIGHT_ULONG 67</span>
 
 
<span class="gd">-static PyObject* c_pascal_triangle_initial(PyObject* self, PyObject* args) {</span>
<span class="gi">+static PyObject* c_pascal_triangle_ulong(PyObject* self, PyObject* args) {</span>
     int height, verbose=0, return_list=0;
     if (!PyArg_ParseTuple(args, &quot;i|ii&quot;, &amp;height, &amp;verbose, &amp;return_list)) return NULL;
 
<span class="gd">-    unsigned int line[height + 1];</span>
<span class="gi">+    unsigned long line[height + 1];</span>
 
     int start = height;
     int size;
     int index;
 
<span class="gd">-    if(height &gt; MAX_HEIGHT_UINT) {</span>
<span class="gd">-        PyErr_Format(PyExc_ValueError, &quot;Unable to build Pascal&#39;s Triangle higher than %d&quot;, MAX_HEIGHT_UINT);</span>
<span class="gi">+    if(height &gt; MAX_HEIGHT_ULONG) {</span>
<span class="gi">+        PyErr_Format(PyExc_ValueError, &quot;Unable to build Pascal&#39;s Triangle higher than %d&quot;, MAX_HEIGHT_ULONG);</span>
         return NULL;
     }
 
<span class="gu">@@ -27,7 +28,7 @@</span>
         }
 
         for (index = start + size; index &gt;= start; index--) {
<span class="gd">-            if(verbose) printf(&quot;%u &quot;, line[index]);</span>
<span class="gi">+            if(verbose) printf(&quot;%lu &quot;, line[index]);</span>
         }
         if(verbose) printf(&quot;\n&quot;);
 
<span class="gu">@@ -37,7 +38,7 @@</span>
     if(return_list) {
         PyObject* py_line = PyList_New(height + 1);
         for (index = height; index &gt;= 0; index--) {
<span class="gd">-            PyList_SetItem(py_line, index, PyInt_FromLong((long) line[index]));</span>
<span class="gi">+            PyList_SetItem(py_line, index, PyLong_FromUnsignedLong(line[index]));</span>
         }
         return py_line;
     } else {
<span class="gu">@@ -48,10 +49,10 @@</span>
 
 
 static PyMethodDef cpascal_triangle_methods[] = {
<span class="gd">-    {&quot;c_pascal_triangle_initial&quot;, c_pascal_triangle_initial, METH_VARARGS},</span>
<span class="gi">+    {&quot;c_pascal_triangle_ulong&quot;, c_pascal_triangle_ulong, METH_VARARGS},</span>
     {NULL, NULL}
 };
 
<span class="gd">-void initcinitial(void) {</span>
<span class="gd">-    (void) Py_InitModule(&quot;cinitial&quot;, cpascal_triangle_methods);</span>
<span class="gi">+void initculong(void) {</span>
<span class="gi">+    (void) Py_InitModule(&quot;culong&quot;, cpascal_triangle_methods);</span>
 }
</pre></div>
</div>
</div>
</div>
<div class="section" id="cpascaltrianglepartialasm">
<h4>CPascalTrianglePartialAsm<a class="headerlink" href="#cpascaltrianglepartialasm" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">CPascalTriangleBase</span>
<span class="kn">from</span> <span class="nn">.cpartial_asm</span> <span class="kn">import</span> <span class="n">c_pascal_triangle_partial_asm</span>


<span class="k">class</span> <span class="nc">CPascalTrianglePartialAsm</span><span class="p">(</span><span class="n">CPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`CPascalTriangleInitial`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - Array initialization is implemented in Assembler</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;C/Assembler&#39;</span>
    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">34</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">c_pascal_triangle_partial_asm</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">return_list</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include</span> <span class="cpf">&lt;Python.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="c1">// TODO LOW: Allocate memory on heap using malloc() instead of stack</span>

<span class="cp">#define MAX_HEIGHT_UINT 34</span>


<span class="k">static</span> <span class="n">PyObject</span><span class="o">*</span> <span class="nf">c_pascal_triangle_partial_asm</span><span class="p">(</span><span class="n">PyObject</span><span class="o">*</span> <span class="n">self</span><span class="p">,</span> <span class="n">PyObject</span><span class="o">*</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">height</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">PyArg_ParseTuple</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s">&quot;i|ii&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">height</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">verbose</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">return_list</span><span class="p">))</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">line</span><span class="p">[</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>

    <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="n">height</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">index</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="n">height</span> <span class="o">&gt;</span> <span class="n">MAX_HEIGHT_UINT</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PyErr_Format</span><span class="p">(</span><span class="n">PyExc_ValueError</span><span class="p">,</span> <span class="s">&quot;Unable to build Pascal&#39;s Triangle higher than %d&quot;</span><span class="p">,</span> <span class="n">MAX_HEIGHT_UINT</span><span class="p">);</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">asm</span> <span class="p">(</span>
         <span class="c1">// Fill in line with 1 and put 0 in the end</span>
         <span class="s">&quot;movl %0, %%ecx</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="s">&quot;movq %1, %%rdi</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="s">&quot;incl %%ecx</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="s">&quot;movl $1, %%eax</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="s">&quot;cld</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="s">&quot;rep</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="s">&quot;stosl</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="o">:</span> <span class="cm">/**/</span>
         <span class="o">:</span> <span class="s">&quot;g&quot;</span> <span class="p">(</span><span class="n">height</span><span class="p">),</span> <span class="s">&quot;g&quot;</span> <span class="p">(</span><span class="n">line</span><span class="p">)</span>
         <span class="o">:</span> <span class="s">&quot;eax&quot;</span><span class="p">,</span> <span class="s">&quot;ecx&quot;</span><span class="p">,</span> <span class="s">&quot;rdi&quot;</span>
        <span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">size</span> <span class="o">&lt;=</span> <span class="n">height</span><span class="p">;</span> <span class="n">size</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">;</span> <span class="n">index</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">size</span><span class="p">;</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">;</span> <span class="n">index</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%u &quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

        <span class="n">start</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="n">return_list</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PyObject</span><span class="o">*</span> <span class="n">py_line</span> <span class="o">=</span> <span class="n">PyList_New</span><span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">height</span><span class="p">;</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">index</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">PyList_SetItem</span><span class="p">(</span><span class="n">py_line</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">PyInt_FromLong</span><span class="p">((</span><span class="kt">long</span><span class="p">)</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]));</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">py_line</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">Py_INCREF</span><span class="p">(</span><span class="n">Py_None</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">Py_None</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="k">static</span> <span class="n">PyMethodDef</span> <span class="n">cpascal_triangle_methods</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span><span class="s">&quot;c_pascal_triangle_partial_asm&quot;</span><span class="p">,</span> <span class="n">c_pascal_triangle_partial_asm</span><span class="p">,</span> <span class="n">METH_VARARGS</span><span class="p">},</span>
    <span class="p">{</span><span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">initcpartial_asm</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">Py_InitModule</span><span class="p">(</span><span class="s">&quot;cpartial_asm&quot;</span><span class="p">,</span> <span class="n">cpascal_triangle_methods</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="id20">
<h5>Diff<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/cextension/initial.py</span>
<span class="gi">+++ ../implementations/cextension/partial_asm.py</span>
<span class="gu">@@ -1,16 +1,17 @@</span>
 from .base import CPascalTriangleBase
<span class="gd">-from .cinitial import c_pascal_triangle_initial</span>
<span class="gi">+from .cpartial_asm import c_pascal_triangle_partial_asm</span>
 
 
<span class="gd">-class CPascalTriangleInitial(CPascalTriangleBase):</span>
<span class="gi">+class CPascalTrianglePartialAsm(CPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`CyPascalTriangleNonRecursiveCTypes`.</span>
<span class="gi">+    Based on :py:class::`CPascalTriangleInitial`.</span>
 
     Difference:
<span class="gd">-        - C implementation</span>
<span class="gi">+        - Array initialization is implemented in Assembler</span>
     &quot;&quot;&quot;
 
<span class="gi">+    language = &#39;C/Assembler&#39;</span>
     max_height = 34
 
     def build(self, height):
<span class="gd">-        return c_pascal_triangle_initial(height, 0, self.return_list)</span>
<span class="gi">+        return c_pascal_triangle_partial_asm(height, 0, self.return_list)</span>
</pre></div>
</div>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/cextension/cinitial.c</span>
<span class="gi">+++ ../implementations/cextension/cpartial_asm.c</span>
<span class="gu">@@ -2,10 +2,11 @@</span>
 #include &lt;stdio.h&gt;
 
 // TODO LOW: Allocate memory on heap using malloc() instead of stack
<span class="gi">+</span>
 #define MAX_HEIGHT_UINT 34
 
 
<span class="gd">-static PyObject* c_pascal_triangle_initial(PyObject* self, PyObject* args) {</span>
<span class="gi">+static PyObject* c_pascal_triangle_partial_asm(PyObject* self, PyObject* args) {</span>
     int height, verbose=0, return_list=0;
     if (!PyArg_ParseTuple(args, &quot;i|ii&quot;, &amp;height, &amp;verbose, &amp;return_list)) return NULL;
 
<span class="gu">@@ -20,8 +21,21 @@</span>
         return NULL;
     }
 
<span class="gi">+    asm (</span>
<span class="gi">+         // Fill in line with 1 and put 0 in the end</span>
<span class="gi">+         &quot;movl %0, %%ecx\n\t&quot;</span>
<span class="gi">+         &quot;movq %1, %%rdi\n\t&quot;</span>
<span class="gi">+         &quot;incl %%ecx\n\t&quot;</span>
<span class="gi">+         &quot;movl $1, %%eax\n\t&quot;</span>
<span class="gi">+         &quot;cld\n\t&quot;</span>
<span class="gi">+         &quot;rep\n\t&quot;</span>
<span class="gi">+         &quot;stosl\n\t&quot;</span>
<span class="gi">+         : /**/</span>
<span class="gi">+         : &quot;g&quot; (height), &quot;g&quot; (line)</span>
<span class="gi">+         : &quot;eax&quot;, &quot;ecx&quot;, &quot;rdi&quot;</span>
<span class="gi">+        );</span>
<span class="gi">+</span>
     for (size = 0; size &lt;= height; size++) {
<span class="gd">-        line[start] = 1;</span>
         for (index = start + 1; index &lt; height; index++) {
             line[index] += line[index + 1];
         }
<span class="gu">@@ -48,10 +62,10 @@</span>
 
 
 static PyMethodDef cpascal_triangle_methods[] = {
<span class="gd">-    {&quot;c_pascal_triangle_initial&quot;, c_pascal_triangle_initial, METH_VARARGS},</span>
<span class="gi">+    {&quot;c_pascal_triangle_partial_asm&quot;, c_pascal_triangle_partial_asm, METH_VARARGS},</span>
     {NULL, NULL}
 };
 
<span class="gd">-void initcinitial(void) {</span>
<span class="gd">-    (void) Py_InitModule(&quot;cinitial&quot;, cpascal_triangle_methods);</span>
<span class="gi">+void initcpartial_asm(void) {</span>
<span class="gi">+    (void) Py_InitModule(&quot;cpartial_asm&quot;, cpascal_triangle_methods);</span>
 }
</pre></div>
</div>
</div>
</div>
<div class="section" id="cpascaltrianglefullasm">
<h4>CPascalTriangleFullAsm<a class="headerlink" href="#cpascaltrianglefullasm" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">CPascalTriangleBase</span>
<span class="kn">from</span> <span class="nn">.cfull_asm</span> <span class="kn">import</span> <span class="n">c_pascal_triangle_full_asm</span>


<span class="k">class</span> <span class="nc">CPascalTriangleFullAsm</span><span class="p">(</span><span class="n">CPascalTriangleBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Based on :py:class::`CPascalTrianglePartialAsm`.</span>

<span class="sd">    Difference:</span>
<span class="sd">        - The algorithm is implemented in Assembler completely</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;C/Assembler&#39;</span>
    <span class="n">max_height</span> <span class="o">=</span> <span class="mi">34</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">c_pascal_triangle_full_asm</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">return_list</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include</span> <span class="cpf">&lt;Python.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="c1">// TODO LOW: Allocate memory on heap using malloc() instead of stack</span>

<span class="cp">#define MAX_HEIGHT_UINT 34</span>


<span class="k">static</span> <span class="n">PyObject</span><span class="o">*</span> <span class="nf">c_pascal_triangle_full_asm</span><span class="p">(</span><span class="n">PyObject</span><span class="o">*</span> <span class="n">self</span><span class="p">,</span> <span class="n">PyObject</span><span class="o">*</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">height</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">return_list</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">PyArg_ParseTuple</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s">&quot;i|ii&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">height</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">verbose</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">return_list</span><span class="p">))</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>

    <span class="c1">// TODO MEDIUM: Make a better fix to support zero-based Pascal&#39;s Triangle</span>
    <span class="n">height</span><span class="o">++</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">line</span><span class="p">[</span><span class="n">height</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">index</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="n">height</span> <span class="o">&gt;</span> <span class="n">MAX_HEIGHT_UINT</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PyErr_Format</span><span class="p">(</span><span class="n">PyExc_ValueError</span><span class="p">,</span> <span class="s">&quot;Unable to build Pascal&#39;s Triangle higher than %d&quot;</span><span class="p">,</span> <span class="n">MAX_HEIGHT_UINT</span><span class="p">);</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">asm</span> <span class="p">(</span>
         <span class="c1">// Fill in line with 1 and put 0 in the end</span>
         <span class="s">&quot;movl %0, %%ecx</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="s">&quot;movq %1, %%rdi</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="s">&quot;movl $1, %%eax</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="s">&quot;cld</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="s">&quot;rep</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="s">&quot;stosl</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="c1">// End of filling</span>
         <span class="s">&quot;movq $0, (%%rdi)</span><span class="se">\n\t</span><span class="s">&quot;</span>  <span class="c1">// TODO MEDIUM: There is no need for zero-padding</span>
         <span class="s">&quot;movq $1, %%rcx</span><span class="se">\n\t</span><span class="s">&quot;</span>  <span class="c1">// line number being processed</span>
         <span class="s">&quot;xorq %%rdx, %%rdx</span><span class="se">\n\t</span><span class="s">&quot;</span>
         <span class="s">&quot;movl %0, %%edx</span><span class="se">\n\t</span><span class="s">&quot;</span>  <span class="c1">// maximum number of lines</span>
         <span class="s">&quot;movq %1, %%rdi</span><span class="se">\n\t</span><span class="s">&quot;</span>  <span class="c1">// start of &quot;line&quot; array</span>
         <span class="s">&quot;outer:</span><span class="se">\n\t</span><span class="s">&quot;</span>
             <span class="s">&quot;movq %%rdx, %%rbx</span><span class="se">\n\t</span><span class="s">&quot;</span>  <span class="c1">// offset of current element</span>
             <span class="s">&quot;subq %%rcx, %%rbx</span><span class="se">\n\t</span><span class="s">&quot;</span>
             <span class="s">&quot;xorq %%r8, %%r8</span><span class="se">\n\t</span><span class="s">&quot;</span>
             <span class="c1">// print %%rcx dwords starting from (%%rdi,%%rbx,4)</span>
             <span class="s">&quot;inner:</span><span class="se">\n\t</span><span class="s">&quot;</span>
                 <span class="s">&quot;movl 4(%%rdi,%%rbx,4), %%eax</span><span class="se">\n\t</span><span class="s">&quot;</span>  <span class="c1">// read line[index + 1]</span>
                 <span class="s">&quot;addl %%eax, (%%rdi,%%rbx,4)</span><span class="se">\n\t</span><span class="s">&quot;</span>  <span class="c1">// line[index] += line[index + 1]</span>
                 <span class="s">&quot;addq $1, %%rbx</span><span class="se">\n\t</span><span class="s">&quot;</span>
                 <span class="s">&quot;incq %%r8</span><span class="se">\n\t</span><span class="s">&quot;</span>
                 <span class="s">&quot;cmpq %%r8, %%rcx</span><span class="se">\n\t</span><span class="s">&quot;</span>
                 <span class="s">&quot;jne inner</span><span class="se">\n\t</span><span class="s">&quot;</span>
             <span class="s">&quot;incq %%rcx</span><span class="se">\n\t</span><span class="s">&quot;</span>
             <span class="s">&quot;cmpq %%rdx, %%rcx</span><span class="se">\n\t</span><span class="s">&quot;</span>
             <span class="s">&quot;jl outer</span><span class="se">\n\t</span><span class="s">&quot;</span>
             <span class="c1">// print %%rdx dwords starting from (%%rdi)</span>
         <span class="o">:</span> <span class="cm">/**/</span>
         <span class="o">:</span> <span class="s">&quot;g&quot;</span> <span class="p">(</span><span class="n">height</span><span class="p">),</span> <span class="s">&quot;g&quot;</span> <span class="p">(</span><span class="n">line</span><span class="p">)</span>
         <span class="o">:</span> <span class="s">&quot;eax&quot;</span><span class="p">,</span> <span class="s">&quot;rbx&quot;</span><span class="p">,</span> <span class="s">&quot;rcx&quot;</span><span class="p">,</span> <span class="s">&quot;rdx&quot;</span><span class="p">,</span> <span class="s">&quot;rdi&quot;</span><span class="p">,</span> <span class="s">&quot;r8&quot;</span>
        <span class="p">);</span>

    <span class="c1">// Some code that used results to ensure that optimization is not applied and assembly code is actually executing</span>
    <span class="k">if</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">index</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%u &quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="n">return_list</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PyObject</span><span class="o">*</span> <span class="n">py_line</span> <span class="o">=</span> <span class="n">PyList_New</span><span class="p">(</span><span class="n">height</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">index</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">PyList_SetItem</span><span class="p">(</span><span class="n">py_line</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">PyInt_FromLong</span><span class="p">((</span><span class="kt">long</span><span class="p">)</span> <span class="n">line</span><span class="p">[</span><span class="n">index</span><span class="p">]));</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">py_line</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">Py_INCREF</span><span class="p">(</span><span class="n">Py_None</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">Py_None</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="k">static</span> <span class="n">PyMethodDef</span> <span class="n">cpascal_triangle_methods</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span><span class="s">&quot;c_pascal_triangle_full_asm&quot;</span><span class="p">,</span> <span class="n">c_pascal_triangle_full_asm</span><span class="p">,</span> <span class="n">METH_VARARGS</span><span class="p">},</span>
    <span class="p">{</span><span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">initcfull_asm</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">Py_InitModule</span><span class="p">(</span><span class="s">&quot;cfull_asm&quot;</span><span class="p">,</span> <span class="n">cpascal_triangle_methods</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="id21">
<h5>Diff<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h5>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/cextension/partial_asm.py</span>
<span class="gi">+++ ../implementations/cextension/full_asm.py</span>
<span class="gu">@@ -1,17 +1,17 @@</span>
 from .base import CPascalTriangleBase
<span class="gd">-from .cpartial_asm import c_pascal_triangle_partial_asm</span>
<span class="gi">+from .cfull_asm import c_pascal_triangle_full_asm</span>
 
 
<span class="gd">-class CPascalTrianglePartialAsm(CPascalTriangleBase):</span>
<span class="gi">+class CPascalTriangleFullAsm(CPascalTriangleBase):</span>
     &quot;&quot;&quot;
<span class="gd">-    Based on :py:class::`CPascalTriangleInitial`.</span>
<span class="gi">+    Based on :py:class::`CPascalTrianglePartialAsm`.</span>
 
     Difference:
<span class="gd">-        - Array initialization is implemented in Assembler</span>
<span class="gi">+        - The algorithm is implemented in Assembler completely</span>
     &quot;&quot;&quot;
 
     language = &#39;C/Assembler&#39;
     max_height = 34
 
     def build(self, height):
<span class="gd">-        return c_pascal_triangle_partial_asm(height, 0, self.return_list)</span>
<span class="gi">+        return c_pascal_triangle_full_asm(height, 0, self.return_list)</span>
</pre></div>
</div>
<div class="highlight-udiff"><div class="highlight"><pre><span class="gd">--- ../implementations/cextension/cpartial_asm.c</span>
<span class="gi">+++ ../implementations/cextension/cfull_asm.c</span>
<span class="gu">@@ -6,17 +6,16 @@</span>
 #define MAX_HEIGHT_UINT 34
 
 
<span class="gd">-static PyObject* c_pascal_triangle_partial_asm(PyObject* self, PyObject* args) {</span>
<span class="gi">+static PyObject* c_pascal_triangle_full_asm(PyObject* self, PyObject* args) {</span>
     int height, verbose=0, return_list=0;
     if (!PyArg_ParseTuple(args, &quot;i|ii&quot;, &amp;height, &amp;verbose, &amp;return_list)) return NULL;
 
<span class="gi">+    // TODO MEDIUM: Make a better fix to support zero-based Pascal&#39;s Triangle</span>
<span class="gi">+    height++;</span>
     unsigned int line[height + 1];
<span class="gd">-</span>
<span class="gd">-    int start = height;</span>
<span class="gd">-    int size;</span>
     int index;
 
<span class="gd">-    if(height &gt; MAX_HEIGHT_UINT) {</span>
<span class="gi">+    if(height &gt; MAX_HEIGHT_UINT + 1) {</span>
         PyErr_Format(PyExc_ValueError, &quot;Unable to build Pascal&#39;s Triangle higher than %d&quot;, MAX_HEIGHT_UINT);
         return NULL;
     }
<span class="gu">@@ -25,32 +24,48 @@</span>
          // Fill in line with 1 and put 0 in the end
          &quot;movl %0, %%ecx\n\t&quot;
          &quot;movq %1, %%rdi\n\t&quot;
<span class="gd">-         &quot;incl %%ecx\n\t&quot;</span>
          &quot;movl $1, %%eax\n\t&quot;
          &quot;cld\n\t&quot;
          &quot;rep\n\t&quot;
          &quot;stosl\n\t&quot;
<span class="gi">+         // End of filling</span>
<span class="gi">+         &quot;movq $0, (%%rdi)\n\t&quot;  // TODO MEDIUM: There is no need for zero-padding</span>
<span class="gi">+         &quot;movq $1, %%rcx\n\t&quot;  // line number being processed</span>
<span class="gi">+         &quot;xorq %%rdx, %%rdx\n\t&quot;</span>
<span class="gi">+         &quot;movl %0, %%edx\n\t&quot;  // maximum number of lines</span>
<span class="gi">+         &quot;movq %1, %%rdi\n\t&quot;  // start of &quot;line&quot; array</span>
<span class="gi">+         &quot;outer:\n\t&quot;</span>
<span class="gi">+             &quot;movq %%rdx, %%rbx\n\t&quot;  // offset of current element</span>
<span class="gi">+             &quot;subq %%rcx, %%rbx\n\t&quot;</span>
<span class="gi">+             &quot;xorq %%r8, %%r8\n\t&quot;</span>
<span class="gi">+             // print %%rcx dwords starting from (%%rdi,%%rbx,4)</span>
<span class="gi">+             &quot;inner:\n\t&quot;</span>
<span class="gi">+                 &quot;movl 4(%%rdi,%%rbx,4), %%eax\n\t&quot;  // read line[index + 1]</span>
<span class="gi">+                 &quot;addl %%eax, (%%rdi,%%rbx,4)\n\t&quot;  // line[index] += line[index + 1]</span>
<span class="gi">+                 &quot;addq $1, %%rbx\n\t&quot;</span>
<span class="gi">+                 &quot;incq %%r8\n\t&quot;</span>
<span class="gi">+                 &quot;cmpq %%r8, %%rcx\n\t&quot;</span>
<span class="gi">+                 &quot;jne inner\n\t&quot;</span>
<span class="gi">+             &quot;incq %%rcx\n\t&quot;</span>
<span class="gi">+             &quot;cmpq %%rdx, %%rcx\n\t&quot;</span>
<span class="gi">+             &quot;jl outer\n\t&quot;</span>
<span class="gi">+             // print %%rdx dwords starting from (%%rdi)</span>
          : /**/
          : &quot;g&quot; (height), &quot;g&quot; (line)
<span class="gd">-         : &quot;eax&quot;, &quot;ecx&quot;, &quot;rdi&quot;</span>
<span class="gi">+         : &quot;eax&quot;, &quot;rbx&quot;, &quot;rcx&quot;, &quot;rdx&quot;, &quot;rdi&quot;, &quot;r8&quot;</span>
         );
 
<span class="gd">-    for (size = 0; size &lt;= height; size++) {</span>
<span class="gd">-        for (index = start + 1; index &lt; height; index++) {</span>
<span class="gd">-            line[index] += line[index + 1];</span>
<span class="gd">-        }</span>
<span class="gd">-</span>
<span class="gd">-        for (index = start + size; index &gt;= start; index--) {</span>
<span class="gi">+    // Some code that used results to ensure that optimization is not applied and assembly code is actually executing</span>
<span class="gi">+    if(verbose) {</span>
<span class="gi">+        for (index = height - 1; index &gt;= 0; index--) {</span>
             if(verbose) printf(&quot;%u &quot;, line[index]);
         }
         if(verbose) printf(&quot;\n&quot;);
<span class="gd">-</span>
<span class="gd">-        start--;</span>
     }
 
     if(return_list) {
<span class="gd">-        PyObject* py_line = PyList_New(height + 1);</span>
<span class="gd">-        for (index = height; index &gt;= 0; index--) {</span>
<span class="gi">+        PyObject* py_line = PyList_New(height);</span>
<span class="gi">+        for (index = height - 1; index &gt;= 0; index--) {</span>
             PyList_SetItem(py_line, index, PyInt_FromLong((long) line[index]));
         }
         return py_line;
<span class="gu">@@ -62,10 +77,10 @@</span>
 
 
 static PyMethodDef cpascal_triangle_methods[] = {
<span class="gd">-    {&quot;c_pascal_triangle_partial_asm&quot;, c_pascal_triangle_partial_asm, METH_VARARGS},</span>
<span class="gi">+    {&quot;c_pascal_triangle_full_asm&quot;, c_pascal_triangle_full_asm, METH_VARARGS},</span>
     {NULL, NULL}
 };
 
<span class="gd">-void initcpartial_asm(void) {</span>
<span class="gd">-    (void) Py_InitModule(&quot;cpartial_asm&quot;, cpascal_triangle_methods);</span>
<span class="gi">+void initcfull_asm(void) {</span>
<span class="gi">+    (void) Py_InitModule(&quot;cfull_asm&quot;, cpascal_triangle_methods);</span>
 }
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="todo">
<h2>TODO<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Provide Assembler x86 implementation for 64-bit integer values</li>
<li>Support Python 3.x (port Python, Cython and C extensions code)</li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Dmitry Mugtasimov.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="_sources/index.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>